<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Flashbots Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Flashbots Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">order flow, auctions and centralisation I - a warning | Flashbots</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://writings.flashbots.net/order-flow-auctions-and-centralisation"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="order flow, auctions and centralisation I - a warning | Flashbots"><meta data-react-helmet="true" name="description" content="Tl;dr This post explores the alarming potential for exclusive order flow to render the builder market uncompetitive. A lack of competition in the builder market threatens to cause rent extraction, poor user experience, and entrenchment of builders with undue influence over network incentives. While cause for concern, the negative externalities of exclusive order flow can be mitigated or wholly avoided as presented in a series of articles, of which this article is the first."><meta data-react-helmet="true" property="og:description" content="Tl;dr This post explores the alarming potential for exclusive order flow to render the builder market uncompetitive. A lack of competition in the builder market threatens to cause rent extraction, poor user experience, and entrenchment of builders with undue influence over network incentives. While cause for concern, the negative externalities of exclusive order flow can be mitigated or wholly avoided as presented in a series of articles, of which this article is the first."><meta data-react-helmet="true" property="og:image" content="https://writings.flashbots.net/img/OF4.png"><meta data-react-helmet="true" name="twitter:image" content="https://writings.flashbots.net/img/OF4.png"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2022-09-12T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/0xQuintus"><meta data-react-helmet="true" property="article:tag" content="flashbots,pbs,order-flow"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://writings.flashbots.net/order-flow-auctions-and-centralisation"><link data-react-helmet="true" rel="alternate" href="https://writings.flashbots.net/order-flow-auctions-and-centralisation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://writings.flashbots.net/order-flow-auctions-and-centralisation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.493ced36.css">
<link rel="preload" href="/assets/js/runtime~main.1cf6ae55.js" as="script">
<link rel="preload" href="/assets/js/main.06935cd7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navRoot_LKda navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items fixFlex_OJh4"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><svg width="12" height="14" viewBox="0 0 12 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.07289 0L7.91879 0.483459L6.631 4.76674H11.5178L4.19989 12.679L3.35398 12.1956L4.72089 7.64736H0L7.07289 0ZM5.20514 6.03608L6.33835 2.26697L2.28701 6.64736H5.02136L5.20514 6.03608ZM4.93407 10.4124L9.23077 5.76674H6.33078L6.16271 6.3243L4.93407 10.4124Z" fill="var(--ifm-font-color-base)"></path></svg><span class="navbar__title title_WuSz logoTitle_PCW0">Flashbots</span></a></div><div class="navbar__items navbar__items--right fixFlex_OJh4 navItems_TfOx"><a href="https://flashbots.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>About</span></a><a href="https://boost.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>MEV-Boost</span></a><a href="https://collective.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Forum</span></a><a href="https://jobs.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Join us</span></a><div class="react-toggle toggle_F2cT react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page layoutDefaults_XzHD"><div class="container margin-vert--md containerRoot_MxZn"><div class="row"><main class="col col--12" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_RC3s" itemprop="headline">order flow, auctions and centralisation I - a warning</h1><div class="blogPostData_A2Le margin-vert--md"><time datetime="2022-09-12T00:00:00.000Z" itemprop="datePublished">12.09.22</time> ¬∑ 12 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_WtYC"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/0xQuintus" target="_blank" rel="noopener noreferrer" class="fixedColor_BDNu" itemprop="url"><span itemprop="name">Quintus Kilbourn</span></a></div></div></div></div></div></header><meta itemprop="image" content="https://writings.flashbots.net/img/OF4.png"><div class="markdown" itemprop="articleBody"><p><strong>Tl;dr</strong> This post explores the alarming potential for exclusive order flow to render the builder market uncompetitive. A lack of competition in the builder market threatens to cause rent extraction, poor user experience, and entrenchment of builders with undue influence over network incentives. While cause for concern, the negative externalities of exclusive order flow can be mitigated or wholly avoided as presented in a series of articles, of which this article is the first.</p><p><em>The gist of this article is captured in <a href="https://www.youtube.com/watch?v=ilc3EoSMMDg" target="_blank" rel="noopener noreferrer">a talk delivered at the MEV Workshop at SBC ‚Äò22</a>. For discussions on this post, see <a href="https://collective.flashbots.net/t/order-flow-auctions-and-centralisation-i-a-warning/258" target="_blank" rel="noopener noreferrer">here.</a></em></p><p><img alt="mev utopia in danger meme" src="/assets/images/OF-129427d23b94e6cc51b1b9cda85bd78d.png"></p><header><h1>Introduction</h1></header><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="what-is-order-flow"></a>What is order flow?<a class="hash-link" href="#what-is-order-flow" title="Direct link to heading">#</a></h3><p>In the context of Ethereum, we regard anything that allows one to change the state of the blockchain as an ‚Äúorder.‚Äù The canonical example is a transaction like the ones found in the mempool, although the concept extends to other formats like ‚Äúintents‚Äù from account abstraction too.
I refer to collections of orders as ‚Äúorder flow‚Äù (OF) and refer to exclusive access to order flow as ‚Äúexclusive order flow‚Äù (EOF).  As you will soon see, EOF will be the main antogonist in this article, primarily because most forms of exclusivity easily prevent competition, which is necessary to have a ‚Äúgood‚Äù MEV market.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="a-good-mev-market"></a>A good MEV market<a class="hash-link" href="#a-good-mev-market" title="Direct link to heading">#</a></h3><p>The particular MEV market in question in this article is <a href="https://ethresear.ch/t/proposer-block-builder-separation-friendly-fee-market-designs/9725" target="_blank" rel="noopener noreferrer">PBS</a> in the form of <a href="https://boost.flashbots.net/" target="_blank" rel="noopener noreferrer">MEV-Boost</a>, but many different forms of MEV markets likely succumb to similar descriptions and dangers. In order to argue that EOF can have undesirable effects on the MEV market, it is important to first establish some of the properties we require from PBS:</p><ul><li><strong>(Approximately) dominant strategy for proposers:</strong> This is the most essential aim of PBS, so hopefully you are already familiar with this idea. At a high level, the aim is that either the proposer‚Äôs best strategy is to build blocks through the builder market or their best strategy yields only marginally higher returns than what the builder market has to offer. We have this goal to prevent centralisation of stake on Ethereum.</li><li><strong>No rent-seeking:</strong> The majority of the MEV that is extracted should not remain with the extracting parties (searchers/builders), but should rather flow back to the rest of the ecosystem. Where exactly the value should flow is a topic for another article, but the obvious contenders are validators, users and DApps.</li><li><strong>Censorship resistance:</strong> just like before PBS, a valid order should be included eventually and, ideally, without much delay.</li><li><strong>Improvements to UX:</strong> admittedly this is more of a desired than a required feature. However, given the addition of a sophisticated agent to the Ethereum ecosystem, it seems remiss not to leverage this agent for improvements to areas of the ecosystem we know to be weak. More detail is added to what UX improvements are possible.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="where-the-orders-flow"></a>Where the orders flow<a class="hash-link" href="#where-the-orders-flow" title="Direct link to heading">#</a></h3><p>Consider a wallet trying to send exclusive order flow to a single builder. In order for the wallet‚Äôs orders to be executed the builder who receives the orders must land a block on chain, which may not happen immediately. End users don‚Äôt like delays and delays also make things like gas fee estimation a lot harder so the wallet is incentivised to minimise this delay by sending OF to the builder with the highest inclusion rate, further increasing their dominance of the market. Clearly, this is a centralising force on the builder market.</p><p>There are various reasons why a wallet might do this. The most obvious is contractual payment for order flow from the builder, but it might also be in exchange for certain features from the builder or because the wallet maintainer is too lazy to integrate with any builder apart from the largest, dominant builder that produces most blocks anyway. These motives and the ability to control order flow are not unique to wallets. For instance, DApp UI‚Äôs are in a very similar position. Lets call an agent that could play this role an ‚Äúoriginator‚Äù for generality.</p><p><img alt="positive feedback loop diagram" src="/assets/images/OF1-db38c1b5eed62b796d55fb625e27de4a.png"></p><p><em>Diagram creds: Jon Charbonneau</em></p><header><h1>The problem</h1></header><p>Exclusive order flow would allow a builder - or small group of colluding builders - to capture the builder market, making it effectively uncompetitive. As we will see, this would have significantly negative consequences on the builder market.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="capturing-the-market"></a>Capturing the market<a class="hash-link" href="#capturing-the-market" title="Direct link to heading">#</a></h3><p>Consider the builder market centralising to a small number of builders, as <a href="https://vitalik.ca/general/2021/12/06/endgame.html" target="_blank" rel="noopener noreferrer">we expect it will (and we‚Äôre OK with that)</a>. In a competitive state, these builders would be spending the majority of their revenue on trying to outbid their competition. The builders could collude to drop their bids significantly and share profits, violating the property of no-rent seeking. Now consider two scenarios:</p><ul><li>A new builder, Bob üë∑üèΩ‚Äç‚ôÇÔ∏è, enters the market. Since the bidding ring is bidding very low, it is easy for Bob to outbid them. The bidding ring could include Bob in their ring, further dividing profits, but, as more builders enter the market, the bidding ring has no choice but to lift its bids to compete, shifting value back to the ecosystem.</li><li>Bob enters the market, but cannot access the majority of order flow, because it is all being sent directly to the incumbent builders. As a result the Bob‚Äôs blocks are not worth much in comparison to the dominant builders‚Äô who hardly have to try to outbid Bob no matter how good Bob‚Äôs building algorithm or user features. Bob attempts to acquire order flow, but originators already have agreements with the incumbent builders. The originators are unlikely to enter similar agreements with Bob as he will likely not have a high inclusion rate. It may even be the case that wallet maintainers simply don‚Äôt feel the overhead of integrating with Bob is worth it. After all, Bob hardly gets any blocks on chain.</li></ul><p>Hopefully, it is clear that the second scenario is the bad one as it sees the incumbent builders continue to retain the majority of MEV revenue, <strong>violating the no-rent seeking property</strong>. One may contend that the scenarios above did not take into account the payment that originators are receiving in exchange for their order flow. However, if an originator‚Äôs business model is selling EOF, switching and sending order flow to a small challenging builder would incur large latency penalties. This switching cost is likely to be reflected in the payment from incumbent builders to originators.</p><p><img alt="order flow advantage boxes meme" src="/assets/images/OF2-bd71868449ad52d6d165b41bd5b5b496.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="additional-consequences"></a>Additional Consequences<a class="hash-link" href="#additional-consequences" title="Direct link to heading">#</a></h3><p><strong>UX</strong>: Access to order flow gives builders a competitive advantage. If builders weren‚Äôt able to secure payment-for order flow (PFOF), they would be incentivised to compete on implementing user features to lure OF their way. The space of potential builder features is, as of yet, largely unexplored. Some of the ideas that have been floating around include account abstraction, backrunning-as-a-service, gasless cancellations, gasless orders, <a href="https://www.youtube.com/watch?v=fAgrIdyWIqc" target="_blank" rel="noopener noreferrer">pre-confirmations</a> and state channels. If order flow does not respond to the implementation of new features because it is tied up in PFOF contracts or some other reason, there is no incentive for builders to implement these features.</p><p>It should be noted that having more order flow than another builder because of superior features is different from having more order flow because of PFOF. In the former case, the barrier to entry is implementing more features, in the latter the barrier to entry is payment and convincing originators to break contracts only to incur longer execution delays. In other words, exclusivity is not implied by features, but it is with PFOF.</p><p><strong>Proposer incentives:</strong> Control over the majority of the value in the builder market leads to influence over proposer incentives. Consider <a href="https://notes.ethereum.org/@fradamt/H1ZqdtrBF" target="_blank" rel="noopener noreferrer">crlists</a>. When a proposer publishes a crlist (or performs any honest behaviour in the general case), some builders may opt not to send blocks to that proposer because they are actively censoring the listed accounts or because they are trying to disincentivise publication of crlists in general. If the market is competitive, withheld blocks should be readily replaced with blocks of similar value from non-censoring builders. If, however, there is only a very small number of builders able to produce valuable blocks and these dominant builders choose to withhold blocks, proposers are forced to choose between rational (profit-seeking) and honest behaviour.
Forcing proposers to choose between being honest and earning high returns is bad in that it incentivises dishonest behaviour and worse in that dishonest stake earns higher returns and grows faster than honest stake, leading to honest proposers becoming an every smaller fraction of the network.</p><p>With rent-seeking, disincentivised censorship resistance and missed opportunities for improvements in UX, clearly exclusive order flow can have a large detrimental impact on the network.</p><p><img alt="wat do meme" src="/assets/images/OF3-5c6e0f3036f9693404b76c75151c5801.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="the-path-forward"></a>The path forward<a class="hash-link" href="#the-path-forward" title="Direct link to heading">#</a></h3><p>We have established that control over order flow poses a significant risk to the network. How can we go about addressing the problem?</p><ul><li>The most obvious response is that the agents who are capable of engaging in harmful behaviour should be made aware of the dangers and <strong>held accountable</strong>. Large entities like Uniswap, Metamask and Infura control large and valuable fractions of Ethereum‚Äôs total order flow (e.g. some estimates place Infura‚Äôs share of total OF at over 70%) and could break the builder market in a finger snap. Similarly, builders who offer PFOF or special features to originators who send EOF should be called out. That being said, it is not in the spirit of blockchain to rely on agents to ‚Äúdo the right thing,‚Äù we should also build systems which are resistant to misbehaviour. Flashbots has spent some time thinking about ways to do this and we plan to make some of this thinking public soon in future posts in this series. In the meantime the points below should suffice as an overview of the areas for potential improvement.</li><li>An interesting solution space is that of <strong>decentralised building</strong>. It may be possible to construct decentralised builders which would be incapable of carrying out the harmful behaviour outlined above. See <a href="https://www.youtube.com/watch?v=fAgrIdyWIqc" target="_blank" rel="noopener noreferrer">Vitalik‚Äôs presentation at MEV workshop at SBC</a> for more details.</li><li>It is possible to build solutions which <strong>alter the incentives</strong> of agents in control of order flow. For example, providing a more efficient and less destructive way for wallets to monetise partly addresses the problem. Searchers also face a tradeoff in which they would like to maximise their chances of executing a bundle but are constrained by the threat of builders stealing their bundles. The result being that searchers may only submit bundles to a few dominant builders. This could be relieved by providing a way for searchers to easily detect bundle theft.</li><li><strong>Defaults</strong> are also very harmful. If the set of builders with whom originators are integrated is fixed, new builders cannot challenge incumbents and the development of new features will not be rewarded. Solutions which reduce the overhead of changing where orders flow seem to be a good mitigation strategy for this problem.</li></ul><aside>**Aside** üí°: *One knee-jerk reaction to the pitfalls of EOF is to say that all orders must flow through the public mempool. This doesn‚Äôt seem to be the best response for a variety of reasons. One being that many UX features like account abstraction are not currently supported by the mempool. Another reason being that builders are unlikely to be incentivised to implement user-facing features if this could not earn them an increase in order flow. Finally, a less obvious reason is that it seems unlikely that a market with purely symmetric order flow would be able to sustain many builders. If one building algorithm is superior to another in the sense that for almost every input the superior algorithm produces a more valuable block, all builders having the same OF would mean that only the builders with the best algorithm would land any blocks. In contrast, if there is some stochasticity in how order flow value is distributed between builders for a given slot, the market is likely to sustain a larger set of builders. A large builder market is more robust to order flow capture as originators have a harder to time sending EOF to builders who have lower inclusion rates and large markets are less susceptible to bidding rings.*</aside><p><strong>A proposed goal:</strong> in order to synthesise several of the different ways of addressing the EOF problem that have been listed above and to outline a research direction, I propose a general goal which attempts to encapsulate what has been written above:</p><p><em>Every order flows to every builder which supports its required features.</em></p><p>In other words, if an order is not being sent via the mempool because of a feature that some builder supports, that order should flow to every builder that supports the desired feature. Research going forward should aim to find a way of achieving this goal or proposing a better alternative goal.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h3><p>Exclusive order flow presents a threat to PBS and, by extension, can be detrimental to the health of Ethereum. More research into mechanisms which reduce risk of order flow capture is required. In the meantime, agents in the position to engage in this behaviour should be held accountable while the ecosystem at large should be made aware of this problem. Getting this right could mean entering a world of innovation on user features and order types, while getting it wrong could lead to a dystopic world of MEV capture.</p><p>Special thanks to Stephane Gosselin and Alejo Salles for helpful feedback on this article.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/order-flow-auctions-and-centralisation-II"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ order flow, auctions and centralisation II - order flow auctions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/fcfs-and-front-running"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Can First Come First Served-Based Transaction Ordering Prevent Front-Running? ¬ª</div></a></div></nav></main><div class="col col--2 TOC_BWJh"><div class="tableOfContents_H-s0 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-order-flow" class="table-of-contents__link">What is order flow?</a></li><li><a href="#a-good-mev-market" class="table-of-contents__link">A good MEV market</a></li><li><a href="#where-the-orders-flow" class="table-of-contents__link">Where the orders flow</a></li><li><a href="#capturing-the-market" class="table-of-contents__link">Capturing the market</a></li><li><a href="#additional-consequences" class="table-of-contents__link">Additional Consequences</a></li><li><a href="#the-path-forward" class="table-of-contents__link">The path forward</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="col footer__links"><div><ul class="row footer__items"><li class="footer__item"><a href="https://github.com/flashbots" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://docs.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation</a></li><li class="footer__item"><a href="https://status.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status</a></li></ul></div><div><ul class="row footer__items"><li class="footer__item"><a href="https://calendar.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Calendar</a></li><li class="footer__item"><a href="https://writings.flashbots.net/tags/transparency-report" target="_blank" rel="noopener noreferrer" class="footer__link-item">Transparency reports</a></li></ul></div><div><ul class="row footer__items"><li class="footer__item"><a href="http://discord.gg/flashbots" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCclbTgsnYUy3vmrptIqCmqQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">¬© 2023 Flashbots, Ltd</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1cf6ae55.js"></script>
<script src="/assets/js/main.06935cd7.js"></script>
</body>
</html>