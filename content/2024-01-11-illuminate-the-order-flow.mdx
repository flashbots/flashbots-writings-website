---
slug: illuminate-the-order-flow
title: Illuminating Ethereum's Order Flow Landscape
authors: [angela]
tags: [data, order-flow]
hide_table_of_contents: false
description: PLACEHOLDER
---

import DuneDashboard from "@site/src/components/DuneDashboard/DuneDashboard";

export const Caption = ({ children }) => (
  <p style={{ opacity: 0.5, fontSize: "1rem" }}>{children}</p>
);

export const Superscript = ({ number }) => (
  <p id={`superscript-${number}`} style={{ opacity: 0.5, fontSize: "1.2rem" }}>
    {number}.
  </p>
);

We live in a world where decentralized finance ("defi") market structure and transaction execution is constantly changing, and poorly understood by most. Among this complexity, it is easy to forget that defi's market structure today is meaningfully different from the current state of traditional finance ("tradfi"). From the roots of a permissionless, global, decentralized genesis, defi is already well along the path to addressing a number of the criticisms levied at tradfi execution, by market participants and regulators alike.

<!--truncate-->

In this post, we cast light on the state of defi order and transaction flow today. We will show how defi has distinguished itself from the traditional order flow market, and discuss the challenges to achieving our shared dream of systems that remain decentralized while maximally benefiting the user.

We will argue that the SEC, Citadel, and Flashbots (among many others) have been perfectly aligned on their identification of market failures and desired market outcomes from the beginning. We will outline a number of problems identified by tradfi market participants themselves with the payment for order flow ("PFOF") landscape, and argue that defi has a meaningful chance of addressing these market failures directly.

We will show that defi's order flow landscape represents a nascent and fragile opportunity, showcasing a decentralized version of a robust order flow processing network using centralized infrastructure. We will argue that with the right mechanisms, permissionless networks of searchers and liquidity provision can create competitive order execution, escaping tradfi’s reliance on a handful of sophisticated market makers to do so. We will argue that what defi needs to truly fulfill its vision and promise is to maintain the existing decentralization in this market, while also increasing competition and the ability to decentralize infrastructure at every layer of the stack.

In doing so, crypto seeks to take one step towards the primitives of a fair, robust, antifragile, and decentralized financial system.

## SEC Proposed Rule 615: The Enchanting Prelude to Defi

To understand the history of order flow and execution, understanding the mature US equity market structure is essential. Tradfi’s market structure starts with market maker preferences to trade with “retail” due to lower adverse selection risk, which means there’s a lower possibility that the stock price will move against the market maker in response to the execution of the order. [Today, over 90% of retail orders are routed directly to six wholesale market makers](https://www.sec.gov/news/statement/gensler-order-competition-20221214), as opposed to “lit” public exchanges. This practice is widely known as payment for order flow (PFOF), where market makers pay to trade against retail order flow, and in return provide commission-free trading for users.

User trade execution quality in PFOF is maintained by two primary practices:

1. _price improvement:_ market makers must fill user orders at a price that is at least better than the National Best Bid and Offer (NBBO), the highest buy and lowest sell price across lit exchanges
2. _fair competition_: order flow is allocated to market makers _in batches_ based on execution quality metrics, such as total price improvement in the last period, and a [uniform PFOF rate](https://www.sec.gov/comments/s7-31-22/s73122-20162480-331492.pdf#page=54) is charged across all participating market makers

Robinhood is one of the largest and most well-known brokers that use PFOF to monetize their retail order flow. In August 2023, Robinhood users traded [$59.8B in equities, $107.3M in options, and $2.2B in crypto](https://investors.robinhood.com/news/news-details/2023/Robinhood-Markets-Inc.-Reports-August-2023-Operating-Data/default.aspx). From PFOF, Robinhood made [$1.1M from S&P 500 stocks, $9M from Non-S&P 500 stocks, and $43.4M from options trading](https://cdn.robinhood.com/assets/robinhood/legal/RHS%20SEC%20Rule%20606%20and%20607%20Disclosure.pdf).

<DuneDashboard
  source="https://dune.com/embeds/3302847/5531199"
  aspectRatio="16/9"
/>

<Caption>
  Source: Robinhood Q3 2023{" "}
  <a href="https://cdn.robinhood.com/assets/robinhood/legal/RHS%20SEC%20Rule%20606%20and%20607%20Disclosure.pdf">
    Rule 606
  </a>{" "}
  Report.
</Caption>

**Figure 1.** Percentage of non-directed orders received by various wholesalers on Robinhood. Orders are segmented by S&P 500 stocks, Non-S&P 500 stocks, and options.

**Figure 1** shows there are at most four wholesale market makers per order type on Robinhood. Out of the four market makers, Citadel fills 30% of S&P 500 orders, 30% of non-S&P orders, and 37% of option orders. Virtu fills 45% of S&P 500 orders and 28% of Non-S&P Orders.

A market structure that has resulted in retail users trading against Citadel and Virtu doesn’t seem great for users, and the SEC doesn’t think so either. The SEC [lists two primary criticisms](https://www.sec.gov/files/rules/proposed/2022/34-96495.pdf) with PFOF market structure:

1. _Order flow segmentation_: The segmentation of retail flow away from lit exchanges to market makers favors market makers and imposes a tax on other market participants. Market makers begin quoting wider on lit exchanges due to increased likelihood of adverse selection, resulting in worse execution quality for traders such as institutional investors on those exchanges.
2. _Incentive misalignment for price improvement on individual orders_: Because order flow is allocated to market makers in batches and evaluated only on total price improvement, market makers have the power at the execution time of individual orders to decide whether to give the user a better price or keep profit for themselves. When execution leverages competition only through indirect means, the surplus goes to the wholesale buyer because they have no incentive to give each user the best possible price.

Additionally, wider quotes on lit exchanges and the failure to account for trade routes through hidden liquidity on exchanges and alternative trading systems such as dark pools have eroded the NBBO over time, further lowering the bare minimum of execution quality for market makers.

To address these issues, in December 2022, the SEC proposed a change in equities market structure from PFOF to [100 to 300ms order-by-order auctions](https://www.sec.gov/files/34-96495-fact-sheet.pdf) operated by an “open competition trading center,” such as an exchange. This change aims to drive better execution on user orders by democratizing access of retail order flow to the broader market, such as institutional investors, and aligning market maker incentives on an order-by-order basis.

Maximally competitive, accessible, and incentive-aligned order-by-order auctions is exactly what defi has been experimenting with in the last two years, at scale!

## Order Flow Power

To contextualize the conversation on defi market structure, we will first present the order flow market shares of various frontends. Understanding order flow market share is important to reasoning about who has enough power to influence market structure in defi, who controls what segments of the market, and to who those segments of the market are valuable.

The data we will present is collected from the Ethereum blockchain on November 1, 2023 to November 30, 2023.

<DuneDashboard
  source="https://dune.com/embeds/3295088/5516700"
  aspectRatio="1/1"
/>
<DuneDashboard
  source="https://dune.com/embeds/3295088/5516698"
  aspectRatio="1/1"
/>
<DuneDashboard
  source="https://dune.com/embeds/3295088/5516699"
  aspectRatio="1/1"
/>

**Figure 2, 3, and 4.** Percentage marketshare of 38 tracked Ethereum frontends[¹](#superscript-1) by volume, transaction count, and users from November 1, 2023 to November 30, 2023.

**Figure 2** shows [$14B](https://dune.com/queries/3295603) of Ethereum DEX volume in November 2023 originated from transactions that called frontend router contracts directly, a method which we estimate the majority to be retail, nontoxic order flow.

**Figures 2-4** shows order flow on Ethereum is dominated by Uniswap’s website app and wallet, who processed $4.03B in volume over 2.2M transactions by 370K users in the month of November, representing 29%, 44%, 44% of the market respectively. This is followed by 1inch’s Frontend and API integrators, who traded $3.9B in volume across 310k users. **Figure 3** shows telegram bots [Maestro](https://www.maestrobots.com/) and [Banana Gun](https://bananagun.io/) have the highest transaction counts after Uniswap and **Figure 4** shows Uniswap’s user count is followed by popular in-app swaps in Metamask and Coinbase Wallet.

<DuneDashboard source="https://dune.com/embeds/3295720/5517827" /> <DuneDashboard source="https://dune.com/embeds/3295741/5517896" />

**Figure 5.** Percentage marketshare of transaction count in various trade size buckets from <$100 to >$1M by each frontend from November 1, 2023 to November 30, 2023.

**Figure 6.** November volume in different token pair categories by Ethereum frontends. ETH/BTC represents ETH and BTC paired with USDC/USDT/DAI. Peg includes popular stablecoin pairs such as USDC/USDT and pegged pairs such as stETH/WETH.[²](#superscript-2) Long-tail includes all other pairs.

**Figures 5 and 6** show that different frontends cater to different user profiles. Telegram bot users trade in smaller sizes up to $10k almost exclusively on long-tail tokens they are sniping. Aggregators and solver systems such as 1inch API and 1inch Fusion, Cowswap, and Uniswap X are preferred by traders trading larger sizes from 10k to above $1M on ETH/BTC and pegged token pairs.

More generally, **Figure 6** shows that out of $14B in retail trade volume on Ethereum in November 2023, 50% is trading long-tail token pairs on Ethereum, 23% is trading ETH/BTC token pairs, and 27% is trading pegged token pairs.

## Decentralized Block Building (A Centralized MVP)

On October 13, 2023, [kyoro.eth](https://twitter.com/kyotometa) [sold](https://etherscan.io/tx/0xf49a2c544b85b28f037596e0b5d6db0c10ea0986a8d89c371720d6cc62e36a43) HAY, [a token Hayden Adams launched](https://twitter.com/haydenzadams/status/1715440623480652025) five years ago to test Uniswap V1, for 2.7 ETH using Cowswap. Twelve Cowswap solvers competed to find an optimal route, and Laertes won by routing to aggregator 0x Protocol, who’s trade route hopped through Uniswap V1, Uniswap V2, and Uniswap V3 HAY-WETH pools. Solver Laertes then submitted the transaction to order flow auction MEV-Blocker, which received 18 bids from searchers to backrun the transaction. MEV-Blocker sent the backruns to 7 block builders who competed to merge them, and Builder0x69 won the block after merging four atomic backruns, two of which filled open 1inch user limit orders, and [one signal backrun](https://etherscan.io/tx/0x76f903fe9298f7d5cf5158503b33350c033f824b59a31b0afafa44d6eb2a73a6) from a searcher willing to hold inventory of HAY. Ultimately, Builder0x69 and searcher backruns returned a total of 0.4 ETH (~$900 at current market price) in recaptured MEV to the refund address specified by Cowswap.

Breaking it down, that’s:

1 solver system + 12 Cowswap solvers + ≥ 1 aggregator + ≥ 3 decentralized exchanges

- ≥ 3 passive liquidity providers of HAY-WETH + 1 order flow auction

- ≥ 4 atomic searchers + ≥ 1 signal searcher + 2 1inch limit order users + 7 block builders

≥ 35 entities involved in helping kyoro.eth get a great price on their trade!

To understand the complexities of a single transaction being processed, it is important to understand each of the four sequential order-by-order auctions involved, and how they coordinate a network of specialized searchers to drive price improvement for users. We will start with the first auction, which occurs at the intent level before a transaction is created, and end in an auction for a full Ethereum block.

### **Solver Auction**

Pioneered by Cowswap, and later adopted in different flavors by 1inch Fusion and Uniswap X, solver systems evolved from aggregators by outsourcing the job of optimally routing a trade to a competitive market. The ability to compete and profit from only optimizing trade routing without needing to compete on frontends and liquidity products incentivized the rise of a new class of specialized searchers called “solvers”.

![Interact with this sankey diagram on [orderflow.art](https://orderflow.art/?isOrderflow=false&metaAggregator=Uniswap+X&metaAggregator=Cowswap&metaAggregator=1inch+Fusion&solver=1inch+Labs&solver=The+T&solver=Seawise&solver=Arctic+Bastion&solver=PropellerSwap&solver=Gnosis_ParaSwap&solver=Laertes&solver=Barter&solver=Quasilabs&solver=Seasolver&solver=Otex&solver=Gnosis_1inch&solver=Copium_Capital&solver=Enso&solver=Gnosis_0x&solver=Rizzolver&solver=PLM&solver=0x51c...06c&solver=0x730...5e8&solver=SCP&solver=Wintermute&solver=0x328...8bb&solver=Airswap+Router&solver=1inch+Router&timeframe=All&startTime=1698811200&endTime=1701363599).](/img/posts/illuminate-the-order-flow/Screenshot_2023-12-29_at_7.06.40_PM.png)

<Caption>
  Interact with this sankey diagram on{" "}
  <a href="https://orderflow.art/?isOrderflow=false&metaAggregator=Uniswap+X&metaAggregator=Cowswap&metaAggregator=1inch+Fusion&solver=1inch+Labs&solver=The+T&solver=Seawise&solver=Arctic+Bastion&solver=PropellerSwap&solver=Gnosis_ParaSwap&solver=Laertes&solver=Barter&solver=Quasilabs&solver=Seasolver&solver=Otex&solver=Gnosis_1inch&solver=Copium_Capital&solver=Enso&solver=Gnosis_0x&solver=Rizzolver&solver=PLM&solver=0x51c...06c&solver=0x730...5e8&solver=SCP&solver=Wintermute&solver=0x328...8bb&solver=Airswap+Router&solver=1inch+Router&timeframe=All&startTime=1698811200&endTime=1701363599">
    orderflow.art
  </a>
  .
</Caption>

**Figure 7.** A sankey diagram that illustrates where solvers source liquidity for transactions that were sent to solver systems Cowswap, 1inch Fusion, and Uniswap X. Entity height reflects the trade volume of landed transactions that moved through each entity in the month of November 2023. Transaction flow: frontend → solver system → solver → liquidity aggregator → liquidity source.

Competing on routing trades involves integrating many liquidity sources and splitting the trade amounts optimally across those liquidity sources. **Figure 7** shows the three solver systems together have 22 solvers that accessed over 33 liquidity sources. **Figure 7** also shows solvers source liquidity across both automated market makers (AMM), most notably Uniswap V3, and private market makers (PMM), most notably Wintermute and SCP.

**Figure 7** also shows that $14M of Cowswap user orders were matched with 1inch user limit orders in landed transactions in November 2023. To win the solver auction, 1inch limit orders must have provided a better price than private market makers, supporting the SEC’s stance in proposed rule 615 that expanding market access to fill retail order flow can drive better user outcomes.

<DuneDashboard
  source="https://dune.com/embeds/3161704/5276426"
  aspectRatio="16/9"
/>

**Figure 8.** Retail trading volume over the last 3 years by frontend category: DEX Frontends, Telegram Bots, in-app Wallet Swaps, Aggregator API Integrators, and Solver Systems. Solver systems include Cowswap, 1inch Fusion, and Uniswap X.

**Figure 8** shows the growth in percentage of order flow volume moving through solver systems over time. In November 2023, $3.67B (26.3%) in retail trading volume moved through one of the three major solver systems.

The growing adoption of solver systems and increasingly competitive market of solvers also lowers the barrier to adoption for innovative new liquidity projects. Solvers are directly incentivized to integrate as many liquidity sources as possible in order to provide more competitive quotes and win the solver auction. So, for the upcoming wave of Uniswap V4 hooks, developers will only need one of thirteen Cowswap solvers to integrate to compete to fill $1.5B in volume (10.5% of Ethereum’s retail order flow from **Figure 2**). As solvers sophisticate over time, defi will also be able to support higher ceilings of complexity for liquidity mechanisms that routers today cannot support.

Next, we will zoom into advancements that lower the barrier to entry to market make on retail order flow, a key source of liquidity in driving competitive prices for higher liquidity token pairs.

### **Market Maker Auction**

Previously, the primary way to access market maker liquidity was through RFQs built by aggregators such as 1inch and 0x. But, this came with the restriction that only the aggregator’s own routing algorithm could access the liquidity of their integrated market makers. Restricting order flow access to RFQs raised the barrier to entry for market makers, who have to spend resources integrating each RFQ API to access each project’s order flow. Then, [Hashflow](https://docs.hashflow.com/hashflow/market-making/getting-started-api-v3) developed an RFQ that allowed any project or solver to tap into its market maker liquidity.

![Interact with this sankey diagram on [orderflow.art](https://orderflow.art/?isOrderflow=false&ofa=1inch+RFQ&ofa=0x+RFQ&ofa=Other+RFQ&ofa=Airswap+RFQ&ofa=Hashflow&timeframe=All&startTime=1698811200&endTime=1701363599).](/img/posts/illuminate-the-order-flow/Screenshot_2023-12-30_at_3.34.04_PM.png)

<Caption>
  Interact with this sankey diagram on{" "}
  <a href="https://orderflow.art/?isOrderflow=false&ofa=1inch+RFQ&ofa=0x+RFQ&ofa=Other+RFQ&ofa=Airswap+RFQ&ofa=Hashflow&timeframe=All&startTime=1698811200&endTime=1701363599">
    orderflow.art
  </a>
  .
</Caption>

**Figure 9.** A sankey diagram that illustrates the volume distributions of projects sourcing liquidity from RFQs and Hashflow, and their integrated private market makers (PMMs) in November 2023.

**Figure 9** shows the orders flow sources of RFQs built by aggregators 1inch, 0x, and Airswap are constrained to their own frontends and aggregation API integrators. On the other hand, Hashflow’s order flow sources range from solvers on Cowswap, 1inch Fusion, and Uniswap X, wallets such as OKX, meta-aggregators such as [Defillama](https://swap.defillama.com/), Odos and OpenOcean, and even 1inch Labs, who is both a solver on 1inch Fusion and 1inch API.

In November 2023, through one API integration with Hashflow, eight market makers competed to fill over $1.45B (45% from **Figure 6**) of ETH/BTC volume on Ethereum across Cowswap, 1inch Fusion and API integrators, and Paraswap. In realized market maker volume filled, **Figure 9** shows Hashflow market makers filled $637M, almost twice as much as 0x and 1inch RFQ market makers filled.

Market makers that integrate with solvers through Hashflow have two other benefits:

1. _Bypasses solver stake requirements_: To become a solver, Cowswap requires solvers to stake [750K](https://snapshot.org/#/cow.eth/proposal/0x267edf7a0bd3c771cfca763322f011ee106d8d5158612c11da29183260d1dba7), 1.5M COW tokens (~$350k in current prices) and 500k cUSDC. 1inch Fusion requires resolvers to have at least [5% of "unicorn power"](https://snapshot.org/#/1inch.eth/proposal/0x09d04402e676a034398615391c34df0e30a515518f93df802f29c131707f9b63) (~$350k in current prices). Integrating with solvers allows market makers to bypass stake requirements on Cowswap and Fusion in order to compete for its $4B in November 2023 volume (**Figure 2**).
2. _Access to more trades_: Without implementing routing algorithms, market makers can only respond to user quotes if the requests match the set of token pairs they quote. Outsourcing routing to a competitive market of solvers increases the surface area of opportunities for the pairs that market makers can quote. In this [transaction](https://etherscan.io/tx/0xb4ed2c8d8c623e3da6bc798ade9928b539405a1f26dc41bd21ba4fb3912a9e12), a Cowswap user is trading 2.1M wstETH → USDT, and solver Barter splits the trade into 2.1M wstETH → WETH on Kyberswap, then 1.6M WETH → USDC *and* 500k WETH → USDT with Wintermute via Hashflow, and then 1.6M USDC → USDT on Maverick.

Ultimately, enabling market makers to quote for more pairs on more order flow sources increases competition and drives price improvement for users.

### **Order flow Auction (OFA)**

Solver and market maker auctions aim to provide the most competitive quote for the user to sign. Once the end user signs the transaction, the entity responsible for transaction inclusion, such as a wallet or a solver, has the option to send the transaction to an order flow auction.

Order flow auctions were introduced as a feature on top of private RPCs following increased usage for [sandwich and revert protection](https://docs.flashbots.net/flashbots-protect/overview) in the last year. In November 2023, [2M (41%)](https://dune.com/queries/3338713/5594289) retail order flow transactions representing [$6.3B (45%)](https://dune.com/queries/3338703) in volume flowed through private RPC endpoints.

Before order flow auctions, increased competition between searchers in [the bundle auction](https://docs.flashbots.net/flashbots-auction/overview#how-does-it-work) increased the percentage of searcher profit bid to the validator. Atomic and [signal searchers](https://frontier.tech/a-tale-of-two-arbitrages) profit from backrunning transactions when trade routing is suboptimal or when a price signal is not accounted for, respectively. By introducing another auction before the bundle auction, order flow auctions redirect the profit previously captured by validators to users. This is accomplished by auctioning off the transaction slots right behind the user transaction to searchers that want to best capture the backrun opportunity.

OFAs [MEV-Blocker](https://mevblocker.io/) and [Flashbots Protect](https://docs.flashbots.net/flashbots-protect/mev-share) (running the [MEV-Share](https://docs.flashbots.net/flashbots-protect/mev-share) OFA protocol) have published transactions seen at their RPC endpoints on [Dune](https://dune.com/home), which enables us to observe who the primary users of OFAs are and evaluate the competitiveness of their price quotes.

<DuneDashboard source="https://dune.com/embeds/3165485/5283009" />
<DuneDashboard source="https://dune.com/embeds/3165471/5282982" />

**Figure 10.** Number of retail order flow transactions received at MEV-Blocker and Flashbots Protect RPC endpoints, categorized by project. Both represents transactions received by both OFAs.

**Figure 11.** Retail order flow volume received by MEV-Blocker and Flashbots Protect RPC endpoints, categorized by project. Both represents volume received by both OFAs.

**Figure 10** shows MEV Blocker’s largest order flow source by transaction count is [Uniswap’s Mobile Wallet](https://support.uniswap.org/hc/en-us/articles/18814993155853-What-is-Swap-Protection-). And although Cowswap’s transaction count is not high, **Figure 11** shows Cowswap makes up $1.5B (59%) of volume flowing through MEV-Blocker. **Figure 10** also shows Flashbots Protect’s largest exclusive order flow source by transaction count is Telegram Bot Unibot. **Figure 11** shows imToken wallet, the highest volume contributor to Flashbots Protect, sends $159M (15%) of volume.

Telegram bot users primarily trade tokens with liquidity only on Uniswap V2. But, sometimes the tokens traded have liquidity elsewhere. When Telegram Bot routers miss these liquidity sources, arbitrage opportunities are created. The highest refund received by a Unibot telegram bot user was [0.255 ETH](https://etherscan.io/tx/0xbff557608e6919a14f0a59926cb0438c784666630cceb0fae8daedcd6e2a5881) ($592 at the time) on December 22, 2023[.](https://etherscan.io/tx/0xbff557608e6919a14f0a59926cb0438c784666630cceb0fae8daedcd6e2a5881) User 0xc3f7 was [swapping 0.8 ETH](https://etherscan.io/tx/0xf39715ea7f7934ee772a5c3f2dc9a8cfdacd4209ca072522ed65be7496283ecb) ($1800) to the Omnicat token, and the [backrun](https://etherscan.io/tx/0x283241f23a16ad6651974b8b8373844e014d3ef5fe45f527c67ed76915163473) atomically arbitraged Uniswap V2 <\> V3 pools of the OmniCat token. From July to December 2023, Unibot telegram bot users have received [3.6 ETH across 230 backruns](https://dune.com/queries/3333212), with an average refund of 0.016 ETH (around ~$35 in current prices).

On the other hand, **Figure 7** shows Cowswap has 13 solvers competing to access 33 liquidity sources and optimally split user trades across them. Yet, their solver transactions have still been backrun [7,700 times](https://dune.com/queries/3035874/5046992) since launch in April 2023, with a cumulative refund of [376 ETH](https://dune.com/queries/3035874/5046992) ($845k in current prices).

Solver transactions can still expose backrunning opportunities for reasons including the following:

1. Previously unaccounted price signals, as some signal searchers (who are typically the same group of market making entities) who are not integrated in earlier auctions could still want to buy at the ending AMM price.
2. Previously unconsidered liquidity sources across PMM and AMM liquidity.
3. Trades were split among considered liquidity sources suboptimally.

Backrunning opportunities from reasons (2) and (3) should decrease over time as solvers increase in sophistication.

Order flow auction refunds are also an additional source of monetization for solvers, frontends, wallets, and users. Cowswap protocol rewards are the primary source of monetization for Cowswap solvers that are not market makers. Yet, Cowswap emitted [388 ETH](https://dune.com/queries/3307454) in solver rewards from May to December 2023, which is almost the same as the [376 ETH](https://dune.com/queries/3035874/5046992) in MEV-Blocker refunds in the same period. Everyone, from solvers, frontends, wallets, to users not sending to an order flow auction today is likely leaving nontrivial amounts of money on the table\![³](#superscript-3)

**_Searcher Competition on OFAs_**

Searcher integration with MEV-Blocker and MEV-share is permissionless, making the OFA the lowest barrier to entry point in the entire order flow network, and therefore, also likely the most competitive.

MEV-Blocker and MEV-Share achieve permissionless integration by using privacy-based mechanisms that protect user trade execution and guard against searcher misbehavior. Integration at any other point in the order flow network requires stake, KYC, or trust relationships to disincentivize misbehavior. MEV-Blocker implements transaction privacy by removing transaction signatures and emitting additional fake transactions to backrunning searchers. MEV-Share implements [programmable privacy](https://collective.flashbots.net/t/mev-share-programmably-private-orderflow-to-share-mev-with-users/1264), such as only revealing to backrunning searchers the pool the user is trading on (eg USDC-WETH Uniswap V3) but not the limit price or the direction of the trade.

Order flow auctions rely on searcher competition to find more arbitrage opportunities and bid higher percentages of their profit towards users. We will focus on atomic arbitrage because it is deterministic to calculate searcher profits using on-chain data. Using [LibMEV](https://libmev.com/dashboard)’s Atomic Arbitrage Profit API, we observe that 52 atomic searchers have made [207 ETH](https://dune.com/queries/3293103/5512900) over 15k backruns on MEV-Blocker and 38 atomic searchers have made [63 ETH](https://dune.com/queries/3292519/5511932) over 2.7K backruns on MEV-Share since their launch in May 2023.

<DuneDashboard
  source="https://dune.com/embeds/3292362/5511766"
  aspectRatio="16/9"
/>
<DuneDashboard
  source="https://dune.com/embeds/3292490/5511876"
  aspectRatio="16/9"
/>

**Figure 12 and 13** shows searcher profit margin over time for MEV-Blocker (top) and MEV-Share (bottom). A profit margin of 0.4 means that if the atomic arbitrage produced 2 eth in profit, the searcher kept 0.8 ETH after tipping and paying gas. The size of the circle represents the profit the searcher made in ETH.

**Figure 12 and 13** show searcher profit margins clustering towards 0 over time on both order flow auctions. This further supports [observations](https://libmev.com/bundles?presetRange=%2290D%22&mevTypeLabels=%5B%22Arbitrage%22%2C%22Sandwich%22%5D&contractFilters=%5B%220x6b75d8af000000e20b7a7ddf000ba900b4009a80%22%5D) in the last few years of the tendency of atomic arbitrage markets to approach near-zero searcher profit margins as opportunities become known and competition heightens.

### **Block Auction**

As we saw in the starting [example](https://etherscan.io/tx/0xf49a2c544b85b28f037596e0b5d6db0c10ea0986a8d89c371720d6cc62e36a43), block builder Builder0x69 was able to include five MEV-Blocker backruns for a user trading HAY for ETH: two 1inch Limit Order <\> Uniswap V3 atomic arbitrages, two Uniswap V3 <\> Uniswap V1 atomic arbitrages, and one signal arbitrage for a total refund of 0.4 ETH.

Retail user outcomes are aligned across auctions by the requirement that transactions sent to builders by [order](https://docs.flashbots.net/flashbots-protect/mev-share#refunds) [flow](https://mevblocker.io/#faq) auctions can only be included if 90% of the searcher bid is refunded to the specified address. The other 10% of the searcher bid that is transferred to the builder incentivizes builders to include as many user backruns as possible.

More broadly, we can view the block auction (also called [mev-boost auction](https://docs.flashbots.net/flashbots-mev-boost/introduction)) as a competition by block builders to merge non-conflicting searcher preferences very quickly. One year ago, Flashbots [open-sourced our production block builder](https://writings.flashbots.net/open-sourcing-the-flashbots-builder) to lower the barrier to entry and drive competition towards faster bundle merging and simulation. Today, there are [41 builders](https://www.relayscan.io/overview?t=7d) actively competing in the block auction.

### **temp**

We have shown how each of the four auctions lower the barrier to entry, democratize access to retail order flow, and increase competition. Together, the four auctions create a market structure where:

- Anyone with economically meaningful information can express it into the block building process before a user trade executes.
- Rather than having few big entities do more, there are increasingly high degrees of searcher specialization that cooperate on routing, providing liquidity, and bundle merging to produce a block.
- And competition among this network of specialized searchers is effectively harnessed towards price improvement for users on an order-by-order basis.

Ultimately, the four sequential auctions showcase a decentralized and cooperative process of arriving at global consensus on a financial state. We use sankey diagrams to visualize this process for November 2023.

![Screenshot 2023-12-27 at 8.21.32 AM.png](/img/posts/illuminate-the-order-flow/Screenshot_2023-12-27_at_8.21.32_AM.png)

**Figure 14.** _Retail Trade Volume_ A \*\*sankey graph that displays the flow of transactions from frontend, solver systems, solvers, order flow auctions, and finally to builders for inclusion.[⁴](#superscript-4)

![Screenshot 2023-12-27 at 8.23.00 AM.png](/img/posts/illuminate-the-order-flow/Screenshot_2023-12-27_at_8.23.00_AM.png)

**Figure 15.** _Retail Liquidity Impact_ A sankey graph that focuses on displaying the liquidity sourced for each user order.[⁴](#superscript-4)

**Figure 14** and **15** show 33 solvers, 12 market makers, 90 OFA backrunners, and 41 block builders involved in facilitating and optimizing user trades across [12,000 token pairs](https://dune.com/queries/3342839). Defi’s size and number in tokens traded demonstrate the extent of global user desires that a few players in a few zones of trust are unable or unwilling to serve. And defi’s execution quality show the eagerness, effectiveness, and diversity of searchers that will show up to fulfill such user preferences when you build systems that empower them to do so.

Ultimately, **Figure 14** and **15** show [global, competitive, and cooperative systems](https://collective.flashbots.net/t/decentralized-crypto-needs-you-to-be-a-geographical-decentralization-maxi/1385) can be achieved in highly financialized contexts, and that they are _insanely great_.

## There’s more work to be done.

With the increase in the amount of orders flowing through solver systems, it is important to consider the impacts on defi’s market structure of the solver mechanisms we design. Frontends who control large amounts of order flow can quickly and dramatically shift market structures, and therefore also the decentralization of the network.

### Defending Decentralization

Contrary to atomic arbitrage which gets more competitive and decentralized over time (**Figure 12** and **13**), market making has historically been an aggressive centralizing force in both tradfi and in defi as well. The natural centralizing force is due to economies of scale and the transferability of their edge, such as in latency infrastructure and asset pricing models, from the existing markets they operate to dominate in other ones.

![A sankey diagram [available on orderflow.art](https://orderflow.art/?isOrderflow=true&metaAggregator=Uniswap+X&metaAggregator=Cowswap&metaAggregator=1inch+Fusion&metaAggregator=MetaMask%3A+Swap+Router&solver=1inch+Labs&solver=The+T&solver=Seawise&solver=Arctic+Bastion&solver=PropellerSwap&solver=Gnosis_ParaSwap&solver=Laertes&solver=Barter&solver=Quasilabs&solver=Seasolver&solver=Otex&solver=Gnosis_1inch&solver=Copium_Capital&solver=Enso&solver=Gnosis_0x&solver=Rizzolver&solver=PLM&solver=0x51c...06c&solver=0x730...5e8&solver=SCP&solver=Wintermute&solver=0x328...8bb&solver=Airswap+Router&solver=1inch+Router&timeframe=All&pairs=ETH-USDC&pairs=USDC-WETH&pairs=ETH-USDT&pairs=USDT-WETH&pairs=DAI-WETH&pairs=DAI-ETH&pairs=USDC-WBTC&pairs=USDT-WBTC&pairs=DAI-WBTC&pairs=WBTC-WETH&startTime=1698811200&endTime=1701363599).](/img/posts/illuminate-the-order-flow/Screenshot_2023-12-28_at_1.24.24_AM.png)

<Caption>
  A sankey diagram{" "}
  <a href="https://orderflow.art/?isOrderflow=true&metaAggregator=Uniswap+X&metaAggregator=Cowswap&metaAggregator=1inch+Fusion&metaAggregator=MetaMask%3A+Swap+Router&solver=1inch+Labs&solver=The+T&solver=Seawise&solver=Arctic+Bastion&solver=PropellerSwap&solver=Gnosis_ParaSwap&solver=Laertes&solver=Barter&solver=Quasilabs&solver=Seasolver&solver=Otex&solver=Gnosis_1inch&solver=Copium_Capital&solver=Enso&solver=Gnosis_0x&solver=Rizzolver&solver=PLM&solver=0x51c...06c&solver=0x730...5e8&solver=SCP&solver=Wintermute&solver=0x328...8bb&solver=Airswap+Router&solver=1inch+Router&timeframe=All&pairs=ETH-USDC&pairs=USDC-WETH&pairs=ETH-USDT&pairs=USDT-WETH&pairs=DAI-WETH&pairs=DAI-ETH&pairs=USDC-WBTC&pairs=USDT-WBTC&pairs=DAI-WBTC&pairs=WBTC-WETH&startTime=1698811200&endTime=1701363599">
    available on orderflow.art
  </a>
  .
</Caption>

**Figure 16.** A sankey diagram that illustrates the flow in volume of ETH/BTC trades from Cowswap, 1inch Fusion, Uniswap X, and Metamask Swaps from November 2023.

**Figure 16** shows that market makers SCP (PLM on Cowswap) and Wintermute (Rizzolver on 1inch Fusion) fill over 75% of ETH/BTC trade volume on the top four order flow sources on Ethereum: Uniswap, 1inch, Metamask, and Cowswap. Cowswap is the exception of the four, where SCP’s Solver PLM only fills 40% _directly_, which could be due to more sophisticated solver competition on Cowswap.

To understand the relationship between volume and profit, we estimate market making profits on solver systems through direct integration as solvers and indirect integration via Hashflow for ETH-USDC, the most popular trading pair on Ethereum, and LINK-USDC, the most popular trading pair outside of ETHBTC and pegged token pairs. Profits are estimated using markouts against centralized spot exchange Binance, often considered crypto’s venue of price discovery where the [fair value](https://frontier.tech/a-tale-of-two-arbitrages) of high liquidity assets can be estimated.

<DuneDashboard
  source="https://dune.com/embeds/3314013/5550314"
  aspectRatio="16/9"
/>

**Figure 17a.** Estimated profits from market making ETH-USDC on Uniswap X, Cowswap, 1inch Fusion, and Hashflow in November 2023.[⁵](#superscript-5)

<DuneDashboard
  source="https://dune.com/embeds/3314390/5550448"
  aspectRatio="16/9"
/>

**Figure 17b.** Estimated profits from market making LINK-USDC on Uniswap X, Cowswap, 1inch Fusion, and Hashflow in November 2023.[⁵](#superscript-5)

**Figure 17** supports that profit distribution even among the top five market makers on ETHUSDC and LINKUSDC is top-heavy. **Figure 17** also shows market making profits are not always correlated with volume traded, and profit to volume ratios can vary between token pairs. On Uniswap X, Wintermute makes the same $40k in profit from trading $73M in ETHUSDC volume and trading $28M in LINKUSDC volume. On the other hand, SCP made $20k from trading $16M in ETHUSDC volume on Uniswap X, making more than twice as much estimated profit per dollar compared to Wintermute.

Cowswap is the only order flow source where it is possible to compare the profit differences between direct and indirect integration, where SCP is directly integrated as a solver and Wintermute quotes via Hashflow. While it is difficult to draw conclusions given limited data and imperfect knowledge of market making strategies, we posit strong incentives for market makers to integrate as close to the frontend as possible, including:

1. _To bypass fees charged by intermediaries:_ Hashflow and RFQs charge market makers a “dynamic fee” for filling user trades through their API. Market makers are charged on a per-order basis, such as 30 bps on risk trades (eg USDC-WETH) and 10 bps on stables (eg USDC-USDT), but charge lower fees from market makers if it would change an order’s route from sourcing AMM liquidity to PMM liquidity. Effectively, indirectly integrated market makers have to quote at least 10-30 bps better to compete with directly integrated market makers.
2. _To obtain control over the execution (known as last look):_ In Uniswap X, directly integrated market makers can choose not to fill user orders when the price moves against them. But, in the case of indirect integration, a separate entity controls the execution of the trade, forcing market makers to quote wider, or less competitively to account for cases when the price changes against them.
3. _To fill the most profitable leg of an order_: Filling user trades directly as a solver, as opposed to backrunning the transaction on an OFA is more efficient and gets a better price.

The capital and resource requirements to stake and integrate each system directly to access such market making advantages can only be afforded by large teams such as SCP and Wintermute. Similarly, running a block builder also [creates](https://arxiv.org/pdf/2311.09083.pdf) market making advantages that can only be afforded by SCP and Wintermute. Named beaverbuild and rsync builder respectively, SCP and Wintermute run the two most dominant block builders on Ethereum, who together built over [66% of MEV-Boost blocks](https://mevboost.pics/) in the first week of January 2024.

The dominance of these two market making teams across every vertical in the order flow processing network support historical observations on the propensity of financial systems to centralize over time and just how powerful economies of scale can be. Decentralization in defi is far from guaranteed, so we must be intentional about the market structure that our mechanisms create.

<p style={{ textAlign: "center" }}>
  <br />
  <img
    src="/img/posts/illuminate-the-order-flow/Screenshot_2023-12-19_at_8.49.32_PM.png"
    alt="You see this world? There’s more work to be done."
    style={{ width: "50%" }}
  />
  <Caption>
    <em>You see this world? There’s more work to be done.</em>
  </Caption>
</p>

### Not all solver mechanisms are created equal.

We showed earlier in **Figure 16** that Cowswap’s solver market has a higher number of solvers and is less dominated by market makers. Despite having more order flow, which theoretically increases incentive to integrate, the distribution of power on 1inch Fusion is much more centralized.

<DuneDashboard
  source="https://dune.com/embeds/3068199/5110033"
  aspectRatio="16/9"
/>

**Figure 18.** 1inch Fusion Volume grouped by solver since launch in December 2022.

**Figure 18** shows 1inch Labs themselves filling 50% and market makers Wintermute (Rizzolver) and Tokka Labs (The T) filling 24% and 10% respectively in November 2023.

Data on Uniswap X also shows centralization of power and profit within a handful of incumbent market makers.

<DuneDashboard
  source="https://dune.com/embeds/3308814/5541351"
  aspectRatio="16/9"
/>

**Figure 19.** Uniswap X Volume grouped by solver since launch in July 2023.

**Figure 19** shows that in November, 90% of volume on Uniswap X was filled by four incumbent market makers, with the top market maker Wintermute filling 60%.

Having three times as much order flow power as Cowswap and 1inch (**Figure 2**), Uniswap X’s design choices are particularly impactful. Uniswap X’s design auctions off an exclusive fill period for each user order to a group of whitelisted solvers, where the winning solver is required to fill 90% of the order auctions they win. This design repeats many of the mistakes that centralized tradfi market structure:

1. Segmentation of retail flow away from passive liquidity providers and directly to a permissioned set of market makers. This change actively centralizes power within a handful of incumbent market makers and taxes the profitability, and therefore incentive, to provide passive liquidity.
2. Mechanisms that regulate misbehavior in aggregate erode incentives to provide each individual user with the best possible price. In only requiring >90% of orders to be filled in aggregate, market makers will choose not to fill when the price changes against them and increase the percentage in other ways, such as still filling when the loss is small.

The degradation of passive liquidity as a result of segmenting up to 25% of retail order flow on Ethereum will:

- Result in less competitive user quotes over time for Uniswap traders, as increased trade impact from less depth of passive liquidity further lowers the minimum that market makers must quote.
- Further negatively impact non-Uniswap traders, such as users not located within the countries of Uniswap’s geographically regulated frontend, who cannot trade against whitelisted market makers and face larger price impact in the permissionless passive liquidity pools.

We show in earlier sections the role that democratized access to order flow has in driving better user outcomes, and the range and diversity of both user and searcher risk preferences. We prove the existence of signal traders willing to take inventory of lower liquidity token symbols, such as MEV-Blocker searcher [0xa1c](https://etherscan.io/tx/0x76f903fe9298f7d5cf5158503b33350c033f824b59a31b0afafa44d6eb2a73a6) taking inventory of HAY and [jaredfromsubway.eth](https://etherscan.io/tokenholdings?a=0x6b75d8af000000e20b7a7ddf000ba900b4009a80), who manages inventory of more than 3,000 low liquidity tokens worth over $1M in aggregate. In contrast, SCP and Wintermute market make [75](https://etherscan.io/tokenholdings?a=0xa69babef1ca67a37ffaf7a485dfff3382056e78c) and [53 tokens](https://etherscan.io/address/0x51c72848c68a965f66fa7a88855f9f7784502a7f) respectively.

In designing mechanisms that favor a handful of market makers, Uniswap X fails to leverage the price improvement that a permissionless network of searchers can provide on both high and lower liquidity token symbols. Instead, Uniswap creates a system that biases towards the risk preferences of incumbents, ultimately underserving defi’s, and Uniswap’s own, core userbase, who itself represents $2.8B (40% in **Figure 6**) of Ethereum’s retail long-tail token trading volume in November 2023.

![NO, Uniswap, you have to pick decentralization, I just gave you a choice so you can feel some sense of control. You have to fix the rip yourself._ Source: [https://www.youtube.com/watch?v=jpZo16cw46I](https://www.youtube.com/watch?v=jpZo16cw46I)](/img/posts/illuminate-the-order-flow/rev-1-BAR-TT3-0050_High_Res_JPEG.avif)

<Caption>
  <em>
    NO, Uniswap, you have to pick decentralization, I just gave you a choice so
    you can feel some sense of control. You have to fix the rip yourself.
  </em>{" "}
  Source:{" "}
  <a href="https://www.youtube.com/watch?v=jpZo16cw46I">
    https://www.youtube.com/watch?v=jpZo16cw46I
  </a>
</Caption>

### Privacy-aware Mechanism Design

The information privacy of trades is particularly important in upholding the execution quality in order-by-order auctions. Even market makers themselves highlight this — in Citadel’s [comment letter](https://www.citadelsecurities.com/wp-content/uploads/sites/2/2023/03/Citadel-Securities-Response-to-the-Auctions-Proposal-Final.pdf#page=17) to SEC proposed rule 615, they list two concerns with trade privacy in order-by-order auctions and describe their adverse effects on execution quality:

1. _trading ahead:_ “(Auction messages) would include detailed information regarding the characteristics of the retail order, including the stock, the direction (buy or sell), and the auction limit price. As a result, all market participants would be aware of the relevant characteristics of the retail order prior to that order actually being executed, and would be freely permitted to trade ahead of the retail order on the basis of that information _even though the execution of the retail order is not certain_. The Proposal thus creates a mechanism that effectively licenses and encourages others to trade ahead of retail orders. Information leakage significantly increases the likelihood that prices move against the retail investor while the order is delayed for 100 to 300 milliseconds in the auction (particularly for larger orders and orders in less liquid stocks).”
2. _failed auctions:_ “The auction mechanism can fail to result in an execution, in which case the retail order would need to be routed to an exchange or another auction. In the event this occurs, one should expect the retail investor to receive far worse execution quality, as the market is fully aware of the auction failure and will take that into account (as well as the price impact from the information leakage and trading ahead that has occurred) when determining whether, and at what price, to fill the order … Retail orders in less liquid stocks should be expected to receive worse execution quality as failed auctions would be more impactful for these orders.”

Citadel recognizes that trading ahead and failed auctions is particularly impactful for large trades and long-tail trading. In defi, solver system frontends are the most popular venues for both user profiles. Uniswap, Cowswap, and 1inch make up $3.8B (40%, 10%, and 5% in **Figure 6**) in Ethereum’s retail long-tail token trading volume in November 2023. And Uniswap, Cowswap, and 1inch Fusion and API frontends processed 154, 189, and 752 trades over $1M, together representing 75% of the retail order flow market, in November 2023 (**Figure 5**).

Yet, solver system mechanisms today fail to address these significant information shortcomings, which are particularly impactful to protecting the execution quality of their core userbases.

Cowswap and 1inch Fusion are designed as open limit order books, where anyone can see the token pair, the direction (buy or sell), and the limit price of user orders. The realized adverse execution effects of on-chain open limit order books are currently under-researched, but probabilistic trading ahead as described by Citadel is very much possible today.

In Uniswap X, additional pricing signals are revealed at each stage of the auction: when an exclusive period is granted, when the winning market maker chooses not to fill, and when the auction fails outright. If a market maker won the exclusive fill period, all other market participants can anticipate the trade will be executed in the next block, and can frontrun on both centralized exchanges and decentralized exchanges on-chain. If the winning market maker chooses not to fill or the auction fails outright, market participants will price in that information when the order is re-routed to solver or market maker auctions, or routed to the subsequent OFA and block auctions, likely resulting in a worse quote than originally signed.

Existing solutions to trading ahead and failed auctions (also referred to as pre-trade and post-trade privacy) in defi involve adding centralized entities that are trusted to uphold privacy guarantees. This is the case for OFAs MEV-Blocker and MEV-Share described above, as well as the block auction, where the privacy of searcher bundles are upheld by trust in block builders to facilitate the sealed-bid auction faithfully and keep failed bundles private forever.

Experimentation in permissionless, albeit centralized, privacy APIs, and investing in the privacy infrastructure that will one day decentralize such APIs is one of the most important research and development problems in defi execution today.

## Orderflow.art

Today, we launch along with this blog post [orderflow.art](https://orderflow.art/?isOrderflow=true), a dashboard that visualizes Ethereum’s order flow processing landscape using sankey diagrams. [Orderflow.art](http://Orderflow.art) supports filtering by transaction hash, so users can trace what projects and searchers were involved in the execution of their trade. Filtering by token pair and entity is also available to empower the community to characterize and observe the origins of the order flow of entities such as Flashbots Protect and Flashbots Builder.

In illluminating order flow, we seek to educate users and frontend projects on the untapped price improvements and monetization opportunities of their trades, simplify the discovery and evaluation processes of MEV opportunities for searchers and liquidity projects, and monitor the decentralization of the market as a collective.

All data and query code is open-source, and methodology, including project-specific handling, is documented [here](https://www.notion.so/Orderflow-art-Methodology-3043d2671f3043e6afb2e6bc39932446?pvs=21).

As the number of centralized off-chain MEV systems increase, trust should be accompanied with easy and legible access to the information required to understand the properties of the mechanism and the data to analyze the execution quality received. The detail in visualization and depth in analysis of offchain solver and order flow auctions in this work is only possible with the hard work by the CoW Protocol and 1inch Labs team in publishing and maintaining Cowswap, MEV-Blocker, and 1inch Fusion data sets.

## Shooting Stars

![We hold the future of defi in the palm of our hands. Don’t let its diminutive size fool you — shooting stars appear tiny too. From your first trade to the last, defi shines with radiant fruit and luminous clarity. PERISHABLE, KEEP DECENTRALIZED. Nutrition Facts: 0 calories. Source: Blue Bottle Coffee](/img/posts/illuminate-the-order-flow/IMG_9965.jpg)

<Caption>
  We hold the future of defi in the palm of our hands. Don’t let its diminutive
  size fool you — shooting stars appear tiny too. From your first trade to the
  last, defi shines with radiant fruit and luminous clarity. PERISHABLE, KEEP
  DECENTRALIZED. Nutrition Facts: 0 calories. Source:{" "}
  <a href="https://bluebottlecoffee.com/us/eng">Blue Bottle</a> Coffee
</Caption>

Having illuminated and compared the defi and tradfi landscapes, several salient points emerge. The permissionless and decentralized genesis of defi has created a unique orderflow processing landscape with the potential to address known tradfi market failures. Despite this opportunity, a number of key challenges exist to realize the true potential of defi in achieving its goals of robustness and decentralization.

**MEV mechanism designers looking to disrupt MEV mechanism designers**, think carefully about the state of the market, and about how your actions and products affect the ability of this market to reach its full potential.

With a few careful iterations, we believe the future is bright for permissionless and decentralized defi. We urge you to join us in both illuminating and building this future.

---

<Superscript number="1" />

_Router-based Deduplication Methodology_: When
a trade is signed on a frontend, the most common development pattern on Ethereum
for swap interfaces is to call the project’s router contract. Tracking the router
contracts of projects is the best available information on-chain to estimate which
frontend a user trade originated from.

Searcher (eg market maker or sandwiching) volume is removed in this method as all major searchers use their own contracts to interact with pools directly. We deduplicate volume by only counting the _first_ on-chain entry point, so when Metamask’s meta-aggregator routes an $100 user order through 1inch, the $100 is only counted as Metamask’s user volume.

_Identification of 38 frontends_: Frontends are identified using a mix of sending test transactions on widely known frontends and by identifying router contracts in a list of top Ethereum contracts by gas used.

_Estimation Details_:

- Pink represents Uniswap’s Universal Router Volume, which is the default for trades that originate from Uniswap’s website app and wallet. However, trades originating from other unknown frontends can also use Uniswap’s Universal Router, so $900M in volume is not exclusive to Uniswap’s official frontends. _We therefore expect for each frontend, this number will represent an overestimate of their volume._
- Some 1inch API integrators don’t have their own routers; their first on-chain entry point is 1inch’s Aggregation Router, so we label these websites and wallets collectively as 1inch API integrators (blue).

See [Orderflow.art Methodology](https://www.notion.so/Orderflow-art-Methodology-3043d2671f3043e6afb2e6bc39932446?pvs=21) for project-specific methodology and edge case documentation, as well as links to open-sourced raw data and code.

<Superscript number="2" />

[List](https://dune.com/queries/3285870) of labeled popular stableswap and pegged token pairs from November 2023.

<Superscript number="3" />

_OFA Multiplexing_:

It may seem like the optimal decision is to send transactions to both order flow auctions in order to maximize searcher coverage and competition to get higher refunds. Counterintuitively, this cancels out the privacy guarantees of both MEV-Blocker and MEV-Share, putting transactions at a high risk of getting sandwiched and ultimately resulting in worse execution.

<Superscript number="4" />

_Sankey Methodology_:

_Retail Trade Volume_: The width of the flow shows volume of liquidity sourced by successful transactions in November 2023 on the Ethereum blockchain. Volume is duplicated after the solver vertical when a solver is routing the trade through multiple liquidity sources. For example, when a $100 LINK-USDC trade is routed by first hopping through a LINK-ETH Uniswap V3 pool, then a ETH-USDC Curve pool, $100 is counted as volume for Uniswap V3 and $100 is counted as volume for Curve. Because the volume before the solver vertical remains deduplicated, an entity with outflow > inflow can be identified as a routing player that executes trades across multiple available sources of liquidity.

_Retail Liquidity Impact_: The width of the flow shows the trade volume of successful transactions originated from a frontend in November 2023 on the Ethereum blockchain. Volume is deduplicated via on-chain entry-point, so when Metamask routes an $100 user order through 1inch, the $100 is only counted as Metamask’s user volume.

<Superscript number="5" />

_Market Making Profit Methodology_:

Market maker profits are estimated by comparing the price from trading on the DEX with the Binance ETHUSDC midprice at a markout of T0, which is time of the beginning of the slot around when the block with their trade was proposed. Binance ETHUSDC midprice is calculated by dividing ETHUSDT midprice by the USDCUSDT midprice.

DEX Price is calculating using the net in and out amounts for a list of maker wallets on key pmm venues: Uniswap X, 1inch Fusion, Cowswap, Metamask, and Hashflow.

1. Get transactions by top level router
2. Joins with raw transfers that filter for single-tx ETH-USDC batches to and from addresses in a list of maker wallets.
3. If maker is the solver, gas fees must be accounted for. If the solver sold eth, eth gas fees are added to the sent amount. If the solver bought eth, eth gas fees are minused from the received amount.

Binance LINK-USDC midprice is calculated by dividing LINKUSDT midprice by the USDCUSDT midprice.
