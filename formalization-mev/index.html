<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Flashbots Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Flashbots Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">On the Formalization of MEV | Flashbots</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://writings.flashbots.net/formalization-mev"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="On the Formalization of MEV | Flashbots"><meta data-react-helmet="true" name="description" content="Thanks to Phil Daian, Alex Obadia, and Mahimna Kelkar for plenty of discussions on the topic."><meta data-react-helmet="true" property="og:description" content="Thanks to Phil Daian, Alex Obadia, and Mahimna Kelkar for plenty of discussions on the topic."><meta data-react-helmet="true" property="og:image" content="https://i.imgur.com/mErPwqL.png"><meta data-react-helmet="true" name="twitter:image" content="https://i.imgur.com/mErPwqL.png"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2021-12-04T00:00:00.000Z"><meta data-react-helmet="true" property="article:author" content="https://twitter.com/fiiiu_"><meta data-react-helmet="true" property="article:tag" content="research"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://writings.flashbots.net/formalization-mev"><link data-react-helmet="true" rel="alternate" href="https://writings.flashbots.net/formalization-mev" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://writings.flashbots.net/formalization-mev" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.2b0da803.css">
<link rel="preload" href="/assets/js/runtime~main.007b9530.js" as="script">
<link rel="preload" href="/assets/js/main.c2bc88a2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navRoot_LKda navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items fixFlex_OJh4"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><svg width="12" height="14" viewBox="0 0 12 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.07289 0L7.91879 0.483459L6.631 4.76674H11.5178L4.19989 12.679L3.35398 12.1956L4.72089 7.64736H0L7.07289 0ZM5.20514 6.03608L6.33835 2.26697L2.28701 6.64736H5.02136L5.20514 6.03608ZM4.93407 10.4124L9.23077 5.76674H6.33078L6.16271 6.3243L4.93407 10.4124Z" fill="var(--ifm-font-color-base)"></path></svg><span class="navbar__title title_WuSz logoTitle_PCW0">Flashbots</span></a></div><div class="navbar__items navbar__items--right fixFlex_OJh4 navItems_TfOx"><a href="https://flashbots.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>About</span></a><a href="https://boost.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>MEV-Boost</span></a><a href="https://collective.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Forum</span></a><a href="https://jobs.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Join us</span></a><div class="react-toggle toggle_F2cT react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page layoutDefaults_XzHD"><div class="container margin-vert--md containerRoot_MxZn"><div class="row"><main class="col col--12" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_RC3s" itemprop="headline">On the Formalization of MEV</h1><div class="blogPostData_A2Le margin-vert--md"><time datetime="2021-12-04T00:00:00.000Z" itemprop="datePublished">04.12.21</time> ¬∑ 13 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_WtYC"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://twitter.com/fiiiu_" target="_blank" rel="noopener noreferrer" class="fixedColor_BDNu" itemprop="url"><span itemprop="name">Alejo Salles</span></a></div></div></div></div></div></header><meta itemprop="image" content="https://i.imgur.com/mErPwqL.png"><div class="markdown" itemprop="articleBody"><p><em>Thanks to Phil Daian, Alex Obadia, and Mahimna Kelkar for plenty of discussions on the topic.</em></p><p>Since its introduction in the <a href="https://arxiv.org/abs/1904.05234" target="_blank" rel="noopener noreferrer">Flashboys 2.0 paper</a> of 2019 by Daian <em>et al.</em>, a lot has been said about <em>Miner</em> (now <em>Maximal</em>) <em>Extractable Value</em>, or MEV. In particular, the launch of the <a href="https://docs.flashbots.net/flashbots-auction/overview" target="_blank" rel="noopener noreferrer">Flashbots Auction</a> propelled what is today a billion dollar economy across various blockchains and centralized exchanges. From <a href="https://twitter.com/bertcmiller/status/1402665992422047747?s=20" target="_blank" rel="noopener noreferrer">thrilling Twitter threads</a> to academic research papers, the MEV phenomenon has captured a central spot in the cryptocurrency discourse. Oddly, however, there is no agreed upon formal definition of MEV.</p><p>While some may argue that the widely shared, intuitive notion of MEV will be sufficient in most scenarios, we believe that proper formalization is critical to establishing a foundation upon which complex theorizing can take place. As Tim Roughgarden put it in a <a href="https://youtu.be/esekWF3SyB8" target="_blank" rel="noopener noreferrer">recent talk</a> on building a theory of DeFi, the first step before &quot;easy&quot; and later &quot;difficult&quot; theorems is to have definitions and basic vocabulary. Further, as was evidenced by a recent public discussion where some claimed that arbitrage is not MEV, it might even be the case that we don&#x27;t share an intuitive notion of MEV after all! A unifying formal definition of MEV would certainly help.</p><p>As it turns out, however, formalizing MEV in a robust, general way is no easy task. In this post, we explore some of the difficulties we encounter when trying to come up with such a definition. We start by reviewing some of the existing formalizations, point out some of their problems, and go on a quest trying to amend some of them. While we present new definitions that improve on some of these issues, our main contribution rests in highlighting many of the subtleties involved, paving the way for a more systematic approach in future work around MEV.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="current-mev-definitions"></a>Current MEV definitions<a class="hash-link" href="#current-mev-definitions" title="Direct link to heading">#</a></h2><p>The original Flashboys paper defines MEV as <em>&quot;the total amount of Ether miners can extract from manipulation of transactions within a given timeframe, which may include multiple blocks‚Äô worth of transactions&quot;</em>, but stays short of attempting a formal definition. Most recently, the widely adopted working definition rings something like:</p><blockquote><p><em>MEV is the value that can be permissionlessly extracted by block proposers by reordering, censoring, or inserting transactions.</em></p></blockquote><p>Perhaps the definition that comes closest to formalizing this is the one given in the recent <a href="https://arxiv.org/abs/2109.04347" target="_blank" rel="noopener noreferrer">Clockwork Finance paper</a> via the following two expressions:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mrow><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>B</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo><mi>max</mi><mo>‚Å°</mo></mo><mrow><mo stretchy="false">(</mo><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>‚Ä¶</mo><mo separator="true">,</mo><msub><mi>B</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo>‚àà</mo><mi>B</mi></mrow></munder><mrow><mo fence="true">{</mo><mi>b</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>s</mi><mi>k</mi></msub><mo stretchy="false">)</mo><mo>‚àí</mo><mi>b</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo fence="true">}</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\mathsf{EV}(p,B,s)=\max_{(B_1, \ldots, B_k)\in B} \left\{ b(p, s_k)-b(p,s)\right\} \tag{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.716em;vertical-align:-0.966em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.43055999999999994em"><span style="top:-2.3089999999999997em;margin-left:0em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31731428571428577em"><span style="top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">‚Ä¶</span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em"><span style="top:-2.3487714285714287em;margin-left:-0.05017em;margin-right:0.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15122857142857138em"><span></span></span></span></span></span></span><span class="mclose mtight">)</span><span class="mrel mtight">‚àà</span><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.966em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">{</span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">‚àí</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em">}</span></span></span><span class="tag"><span class="strut" style="height:1.716em;vertical-align:-0.966em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></div><p>and:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mi>k</mi><mrow><mo>‚àí</mo><mi mathvariant="sans-serif">M</mi><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mrow><mi mathvariant="sans-serif">v</mi><mi mathvariant="sans-serif">a</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">i</mi><mi mathvariant="sans-serif">d</mi><mi mathvariant="sans-serif">B</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">o</mi><mi mathvariant="sans-serif">c</mi><mi mathvariant="sans-serif">k</mi><mi mathvariant="sans-serif">s</mi></mrow><mi>k</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mi mathvariant="normal">.</mi></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">k\mathsf{-MEV}(p,s)=\mathsf{EV}(p, \mathsf{validBlocks}_k(p,s), s). \tag{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span><span class="mord"><span class="mord">‚àí</span><span class="mord mathsf">M</span><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord"><span class="mord"><span class="mord mathsf" style="margin-right:0.01389em">v</span><span class="mord mathsf">a</span><span class="mord mathsf">l</span><span class="mord mathsf">i</span><span class="mord mathsf">d</span><span class="mord mathsf">B</span><span class="mord mathsf">l</span><span class="mord mathsf">o</span><span class="mord mathsf">c</span><span class="mord mathsf">k</span><span class="mord mathsf">s</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mord">.</span></span><span class="tag"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></div><p>Here, EV is the <em>extractable value</em> by player <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span> in state <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">s</span></span></span></span></span> given a set of valid block sequences <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>‚Ä¶</mo><mo separator="true">,</mo><msub><mi>B</mi><mi>n</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(B_1, \ldots, B_n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="minner">‚Ä¶</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> is one such sequence, and <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><msub><mi>s</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">b(p, s_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> is the balance of player <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span> in the state resulting of applying blocks <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>B</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>‚Ä¶</mo><mo separator="true">,</mo><msub><mi>B</mi><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(B_1, \ldots, B_k)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="minner">‚Ä¶</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> to <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">s</span></span></span></span></span>. <em>k</em>-MEV is the <em>k-maximal extractable value</em> by a player <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span> in state <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">s</span></span></span></span></span> acting as block proposer, where <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="sans-serif">v</mi><mi mathvariant="sans-serif">a</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">i</mi><mi mathvariant="sans-serif">d</mi><mi mathvariant="sans-serif">B</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">o</mi><mi mathvariant="sans-serif">c</mi><mi mathvariant="sans-serif">k</mi><mi mathvariant="sans-serif">s</mi></mrow><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">\mathsf{validBlocks}_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord"><span class="mord mathsf" style="margin-right:0.01389em">v</span><span class="mord mathsf">a</span><span class="mord mathsf">l</span><span class="mord mathsf">i</span><span class="mord mathsf">d</span><span class="mord mathsf">B</span><span class="mord mathsf">l</span><span class="mord mathsf">o</span><span class="mord mathsf">c</span><span class="mord mathsf">k</span><span class="mord mathsf">s</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> is the set of all valid block sequences of <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.03148em">k</span></span></span></span></span> blocks that <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span> can create, and single-block MEV is just 1-MEV.</p><p>These expressions were slightly tweaked from those in the paper for notational simplicity, but are otherwise equivalent. In particular, we consider balances of players as opposed to accounts (omitting a sum over accounts controlled by a player), and remove the explicit reference to the chain&#x27;s native asset; we will return to this point later.</p><p>We will use this definition of MEV as a starting point, noting that <a href="https://arxiv.org/abs/2106.01870" target="_blank" rel="noopener noreferrer">most</a> <a href="https://arxiv.org/abs/2101.05511" target="_blank" rel="noopener noreferrer">other</a> <a href="https://arxiv.org/abs/2102.03347" target="_blank" rel="noopener noreferrer">papers</a> provide similar definitions that face the same limitations, or do not provide formal definitions at all. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="existing-limitations"></a>Existing limitations<a class="hash-link" href="#existing-limitations" title="Direct link to heading">#</a></h2><p>We start by noting a fatal flaw in the above expressions: the maximal extractable value depends on the player <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span>! This means that if <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span> has, say, some pending airdrop claim, their MEV will be larger than for a player who doesn&#x27;t. While this might make sense for the extractable value, it is certainly at odds with the idea of a &quot;permissionlessly extracted&quot; value.</p><p>Upon closer inspection, it is not entirely clear what the notion of &quot;player&quot; is actually referring to. We can identify at least three intertwined meanings: i) a player as a transaction signer, having balances and controlling accounts, ii) a player as an actor in the protocol game, having (or lacking) block proposing rights, and iii) a player in the networking sense, a node operator affected by latencies and having a unique mempool view.</p><p>While the latter meaning does probably not apply in this formulation (although we will come back to it later), meanings i) and ii) are somewhat conflated: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span> certainly refers to i) when talking about balances in (1), but in going from (1) to (2) we also ascribe <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span> block proposing rights, in line with meaning ii). We argue that a proper definition of MEV <em>should be independent of the player in the sense of i)</em>, that is, it should not depend on particular signing rights. With respect to ii), we will define MEV <em>given</em> block proposing privileges. This effectively decouples the problem into value extraction on one hand, and obtaining sequencing rights on the other, which might prove useful when thinking about extraction costs, network security, etc. </p><p>Other caveats with the above definitions are the treatment of multi-block MEV (related to the tangling of meanings i) and ii) above), the omission of fees arising from reverted transactions, and the inadequacy of the notion of blocks when attempting to generalize MEV to the cross-domain setting. In what follows, we attempt to patch the definitions to solve some of these issues when possible, and discuss some other difficulties we find along the way.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="patching-mev"></a>Patching MEV<a class="hash-link" href="#patching-mev" title="Direct link to heading">#</a></h2><p>As mentioned above, the first task is to come up with a truly permissionless MEV definition. We will keep the player dependency in the definition of extractable value, but get rid of it when moving to MEV. We note here that we use <em>player</em> in sense i) above, giving it, for both EV and MEV, full block sequencing rights. We propose the following:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mrow><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo><mi>max</mi><mo>‚Å°</mo></mo><mrow><mi>B</mi><mo>‚àà</mo><mrow><mi mathvariant="sans-serif">v</mi><mi mathvariant="sans-serif">a</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">i</mi><mi mathvariant="sans-serif">d</mi><mi mathvariant="sans-serif">B</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">o</mi><mi mathvariant="sans-serif">c</mi><mi mathvariant="sans-serif">k</mi><mi mathvariant="sans-serif">s</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow></munder><mrow><mo fence="true">{</mo><mi>b</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>B</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo><mo>‚àí</mo><mi>b</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo fence="true">}</mo></mrow></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\mathsf{EV}(p, s)=\max_{B \in \mathsf{validBlocks}(p)} \left\{ b(p, B(s))-b(p,s)\right\} \tag{3}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.716em;vertical-align:-0.966em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.43055999999999994em"><span style="top:-2.3089999999999997em;margin-left:0em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em">B</span><span class="mrel mtight">‚àà</span><span class="mord mtight"><span class="mord mathsf mtight" style="margin-right:0.01389em">v</span><span class="mord mathsf mtight">a</span><span class="mord mathsf mtight">l</span><span class="mord mathsf mtight">i</span><span class="mord mathsf mtight">d</span><span class="mord mathsf mtight">B</span><span class="mord mathsf mtight">l</span><span class="mord mathsf mtight">o</span><span class="mord mathsf mtight">c</span><span class="mord mathsf mtight">k</span><span class="mord mathsf mtight">s</span></span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mclose mtight">)</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.966em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">{</span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">‚àí</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em">}</span></span></span><span class="tag"><span class="strut" style="height:1.716em;vertical-align:-0.966em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></div><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mrow><mi mathvariant="sans-serif">M</mi><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo><mi>min</mi><mo>‚Å°</mo></mo><mrow><mi>p</mi><mo>‚àà</mo><mi>P</mi></mrow></munder><mo stretchy="false">{</mo><mrow><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(4)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\mathsf{MEV}(s)=\min_{p\in P}\{\mathsf{EV}(p, s)\}. \tag{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathsf">M</span><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.630439em;vertical-align:-0.880439em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.66786em"><span style="top:-2.3556690000000002em;margin-left:0em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">p</span><span class="mrel mtight">‚àà</span><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.880439em"><span></span></span></span></span></span><span class="mopen">{</span><span class="mord"><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mclose">}</span><span class="mord">.</span></span><span class="tag"><span class="strut" style="height:1.630439em;vertical-align:-0.880439em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></div><p>The first expression here closely resembles (1), but we removed the dependency on the set of valid block sequences, which is implicit, and we&#x27;re only considering a single block (more on this later). Here <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="sans-serif">v</mi><mi mathvariant="sans-serif">a</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">i</mi><mi mathvariant="sans-serif">d</mi><mi mathvariant="sans-serif">B</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">o</mi><mi mathvariant="sans-serif">c</mi><mi mathvariant="sans-serif">k</mi><mi mathvariant="sans-serif">s</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathsf{validBlocks}(p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathsf" style="margin-right:0.01389em">v</span><span class="mord mathsf">a</span><span class="mord mathsf">l</span><span class="mord mathsf">i</span><span class="mord mathsf">d</span><span class="mord mathsf">B</span><span class="mord mathsf">l</span><span class="mord mathsf">o</span><span class="mord mathsf">c</span><span class="mord mathsf">k</span><span class="mord mathsf">s</span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mclose">)</span></span></span></span></span> is the set of valid blocks that can be proposed by <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span> (<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mrow><mi mathvariant="sans-serif">v</mi><mi mathvariant="sans-serif">a</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">i</mi><mi mathvariant="sans-serif">d</mi><mi mathvariant="sans-serif">B</mi><mi mathvariant="sans-serif">l</mi><mi mathvariant="sans-serif">o</mi><mi mathvariant="sans-serif">c</mi><mi mathvariant="sans-serif">k</mi><mi mathvariant="sans-serif">s</mi></mrow><mn>1</mn></msub><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathsf{validBlocks}_1(p,s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord"><span class="mord mathsf" style="margin-right:0.01389em">v</span><span class="mord mathsf">a</span><span class="mord mathsf">l</span><span class="mord mathsf">i</span><span class="mord mathsf">d</span><span class="mord mathsf">B</span><span class="mord mathsf">l</span><span class="mord mathsf">o</span><span class="mord mathsf">c</span><span class="mord mathsf">k</span><span class="mord mathsf">s</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span> before, omitting the amount of blocks and state dependency for succinctness). <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">B(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>, in turn, denotes the state obtained by applying block <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.05017em">B</span></span></span></span></span> on top of state <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">s</span></span></span></span></span>.</p><p>In expression (4), we obtained a definition for MEV that, as desired, is independent of the player (denoting <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi></mrow><annotation encoding="application/x-tex">P</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span></span></span></span></span> the set of players). While it might perhaps be counterintuitive to find a minimum in the definition of <em>maximal</em> extractable value, this minimum simply encodes the idea that extraction should be permissionless. EV already takes care of maximizing, the value extractable permissionlessly is the one the <em>least privileged actor</em> can take from the network (again, assuming they have block proposing rights).</p><p>This definition begs the question, however, what happens when extraction requires upfront capital? Definition (2) did not have this problem since it had an explicit dependency on the player, but having now removed it, we need to take into account that some MEV might only be extractable at certain levels of initial capital. We note however that gas fees are not part of the requirement here, since a proposer can sequence &quot;free&quot; transactions at will, so that in general MEV might be greater than zero even with no initial capital.</p><p>Still, we want to make the dependency on capital explicit, since many MEV opportunities depend on it. We write (using EV from (3)):</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mrow><mi mathvariant="sans-serif">M</mi><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">;</mo><mi>K</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo><mi>min</mi><mo>‚Å°</mo></mo><mrow><mo stretchy="false">{</mo><mi>p</mi><mo>‚àà</mo><mi>P</mi><mi mathvariant="normal">‚à£</mi><mi>b</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo>‚â•</mo><mi>K</mi><mo stretchy="false">}</mo></mrow></munder><mo stretchy="false">{</mo><mrow><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo stretchy="false">}</mo><mi mathvariant="normal">.</mi></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(5)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\mathsf{MEV}(s;K)=\min_{\{p\in P | b(p,s)\geq K\}}\{\mathsf{EV}(p, s)\}. \tag{5}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathsf">M</span><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">;</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.716em;vertical-align:-0.966em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.66786em"><span style="top:-2.3089999999999997em;margin-left:0em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">{</span><span class="mord mathnormal mtight">p</span><span class="mrel mtight">‚àà</span><span class="mord mathnormal mtight" style="margin-right:0.13889em">P</span><span class="mord mtight">‚à£</span><span class="mord mathnormal mtight">b</span><span class="mopen mtight">(</span><span class="mord mathnormal mtight">p</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight">s</span><span class="mclose mtight">)</span><span class="mrel mtight">‚â•</span><span class="mord mathnormal mtight" style="margin-right:0.07153em">K</span><span class="mclose mtight">}</span></span></span></span><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span><span class="mop">min</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.966em"><span></span></span></span></span></span><span class="mopen">{</span><span class="mord"><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mclose">}</span><span class="mord">.</span></span><span class="tag"><span class="strut" style="height:1.716em;vertical-align:-0.966em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">5</span></span><span class="mord">)</span></span></span></span></span></span></div><p>This definition tells us that the maximal extractable value in state <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">s</span></span></span></span></span> for initial capital <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi></mrow><annotation encoding="application/x-tex">K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.07153em">K</span></span></span></span></span> is the value that can be extracted by any player that possesses at least that amount of initial capital. </p><p>The next step we consider is what happens with transactions in the mempool. In the above we were considering &quot;valid blocks&quot;, but crucially these can contain reverted transactions, that pay fee, but do not modify the state. This is a tricky point, as it involves meaning iii) above for the player due to the fact that different views of the mempool yield different sets of valid blocks. While in practice searchers extracting MEV are constantly looking at the mempool for opportunities, transactions will eventually need to be included in a block to modify the state and give rise to the opportunity, so there is no loss of generality in terms of valid transactions if we only consider state changes as opposed to the more general notion of valid blocks. We do lose reverted transactions as a source of MEV in this case, so we could try to modify our formulas to include a view of the mempool dependent on the player, but this would conflate meanings i) and iii), and we would run into trouble when minimizing over players. Considering that the mempool architecture is particular only to some domains, this would also limit the generalizability of the expressions. We thus explicitly leave out reverted transactions as a source of MEV, but note that they are part of the revenue that sequencers take home, and contribute to the negative externalities of MEV extraction, as quantified by the <a href="https://writings.flashbots.net/quantifying-rev" target="_blank" rel="noopener noreferrer"><em>extractable value cost</em></a>.</p><p>Leaving out reverted transactions enables us to go even further, beyond the notion of blocks, which will enable us to consider MEV in more general domains, like centralized exchanges. We rewrite our definition for extractable value as:</p><div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><mrow><mi mathvariant="sans-serif">E</mi><mi mathvariant="sans-serif">V</mi></mrow><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo><mi>max</mi><mo>‚Å°</mo></mo><mrow><mo fence="true">{</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">‚Ä≤</mo></msup><mo>‚àà</mo><mi>S</mi><mi mathvariant="normal">‚à£</mi><mi>s</mi><mover><mo stretchy="true">‚Üí</mo><mpadded width="+0.6em" lspace="0.3em"><msub><mi>a</mi><mi>p</mi></msub></mpadded></mover><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">‚Ä≤</mo></msup><mo fence="true">}</mo></mrow></munder><mrow><mo fence="true">{</mo><mi>b</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">‚Ä≤</mo></msup><mo stretchy="false">)</mo><mo>‚àí</mo><mi>b</mi><mo stretchy="false">(</mo><mi>p</mi><mo separator="true">,</mo><mi>s</mi><mo stretchy="false">)</mo><mo fence="true">}</mo></mrow><mi mathvariant="normal">.</mi></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(6)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">\mathsf{EV}(p, s)=\max_{\left\{s&#x27;\in S|s\xrightarrow{a_p} s&#x27;\right\}} \left\{ b(p, s&#x27;)-b(p,s)\right\}. \tag{6}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathsf">E</span><span class="mord mathsf" style="margin-right:0.01389em">V</span></span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.867912em;vertical-align:-2.06602em"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.43056000000000005em"><span style="top:-1.8340000000000003em;margin-left:0em"><span class="pstrut" style="height:3.0975em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="minner mtight"><span class="mopen sizing reset-size3 size6 mtight delimcenter" style="top:0.07500000000000001em"><span class="delimsizing size2 mtight"><span class="mtight">{</span></span></span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em"><span style="top:-2.786em;margin-right:0.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">‚Ä≤</span></span></span></span></span></span></span></span></span><span class="mrel mtight">‚àà</span><span class="mord mathnormal mtight" style="margin-right:0.05764em">S</span><span class="mord mtight">‚à£</span><span class="mord mathnormal mtight">s</span><span class="mrel x-arrow mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.2112857142857143em"><span style="top:-3.425742857142857em"><span class="pstrut" style="height:2.5220000000000002em"></span><span class="sizing reset-size3 size1 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.23056em"><span style="top:-2.3000000000000003em;margin-left:0em;margin-right:0.1em"><span class="pstrut" style="height:2.5em"></span><span class="mord mathnormal mtight">p</span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.39444em"><span></span></span></span></span></span></span></span></span></span><span class="svg-align" style="top:-2.511em"><span class="pstrut" style="height:2.5220000000000002em"></span><span class="hide-tail mtight" style="height:0.522em;min-width:1.469em"><svg width="400em" height="0.522em" viewBox="0 0 400000 522" preserveAspectRatio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.01100000000000012em"><span></span></span></span></span></span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em"><span style="top:-2.786em;margin-right:0.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">‚Ä≤</span></span></span></span></span></span></span></span></span><span class="mclose sizing reset-size3 size6 mtight delimcenter" style="top:0.07500000000000001em"><span class="delimsizing size2 mtight"><span class="mtight">}</span></span></span></span></span></span></span><span style="top:-3.0975em"><span class="pstrut" style="height:3.0975em"></span><span><span class="mop">max</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:2.06602em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">{</span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">‚Ä≤</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">‚àí</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mord mathnormal">b</span><span class="mopen">(</span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em">}</span></span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord">.</span></span><span class="tag"><span class="strut" style="height:2.867912em;vertical-align:-2.06602em"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">6</span></span><span class="mord">)</span></span></span></span></span></span></div><p>Here, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.05764em">S</span></span></span></span></span> is the set of all states, and the notation <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mover><mo stretchy="true">‚Üí</mo><mpadded width="+0.6em" lspace="0.3em"><msub><mi>a</mi><mi>p</mi></msub></mpadded></mover><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">‚Ä≤</mo></msup></mrow><annotation encoding="application/x-tex">s\xrightarrow{a_p} s&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.934392em;vertical-align:-0.01100000000000001em"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.923392em"><span style="top:-3.322em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.16454285714285716em"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.2818857142857143em"><span></span></span></span></span></span></span></span></span></span><span class="svg-align" style="top:-2.689em"><span class="pstrut" style="height:2.7em"></span><span class="hide-tail" style="height:0.522em;min-width:1.469em"><svg width="400em" height="0.522em" viewBox="0 0 400000 522" preserveAspectRatio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"></path></svg></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.01100000000000001em"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">‚Ä≤</span></span></span></span></span></span></span></span></span></span></span></span></span> means that state <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">‚Ä≤</mo></msup></mrow><annotation encoding="application/x-tex">s&#x27;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.751892em;vertical-align:0em"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.751892em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">‚Ä≤</span></span></span></span></span></span></span></span></span></span></span></span></span> is <em>reachable</em> from state <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal">s</span></span></span></span></span> by some action or sequence of actions <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>p</mi></msub></mrow><annotation encoding="application/x-tex">a_p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.15139200000000003em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">p</span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span> by player <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal">p</span></span></span></span></span>. Together with equation (5) above, we achieved defintions that will allow us to easily generalize to the cross-domain case (see below), and solves most of the issues we encountered with definitions (1) and (2).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="outstanding-issues-and-extensions"></a>Outstanding issues and extensions<a class="hash-link" href="#outstanding-issues-and-extensions" title="Direct link to heading">#</a></h2><p>In patching the MEV definition, we moved to single blocks, sweeping under the rug the issue of multi-block MEV. In fact, this is automatically taken into account by our latest expressions (5) and (6), since by expressing EV in terms of state as opposed to blocks, the formulas apply to whatever period the proposer has ordering rights in. The question now becomes one of how to get those ordering rights. In order to do this cleanly we need to ascribe probabilities for the different events (say producing a single block, two consecutive blocks, etc.), so we can come up with an expected value for the total MEV. This, however, is beyond the scope of the MEV formalization, since expression (5) can be simply plugged in once the adequate ensemble is defined.</p><p>Another topic we touched upon in passing is that of <em>cross-domain</em> MEV. In a world where different chains (or more generally <em>domains</em>) have their own mechanisms for state updates, but are effectively linked by dependencies in their states (think an L1 deposit affecting L2 balances when processed), we expect to find MEV that can be only extracted by sequencing state changes jointly in <a href="https://arxiv.org/abs/2112.01472" target="_blank" rel="noopener noreferrer">more than one domain</a>. Our formulation in terms of states is amenable to this extension, with the caveat that different domains have different native assets, which we need to take into account. We won&#x27;t go into the details here, but this can be tackled introducing <em>pricing functions</em> for translating from one domain to the next. At first approximation, we can take a pricing function <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mrow><mi>i</mi><mo>‚Üí</mo><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">p_{i\rightarrow j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">‚Üí</span><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span> to go from the native asset in domain <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em"></span><span class="mord mathnormal">i</span></span></span></span></span> to the one of domain <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em"></span><span class="mord mathnormal" style="margin-right:0.05724em">j</span></span></span></span></span>, and ask that <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mrow><mi>j</mi><mo>‚Üí</mo><mi>i</mi></mrow></msub><mo>=</mo><mn>1</mn><mi mathvariant="normal">/</mi><msub><mi>p</mi><mrow><mi>i</mi><mo>‚Üí</mo><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">p_{j\rightarrow i}=1/p_{i \rightarrow j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.716668em;vertical-align:-0.286108em"></span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span><span class="mrel mtight">‚Üí</span><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.036108em;vertical-align:-0.286108em"></span><span class="mord">1</span><span class="mord">/</span><span class="mord"><span class="mord mathnormal">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">‚Üí</span><span class="mord mathnormal mtight" style="margin-right:0.05724em">j</span></span></span></span></span><span class="vlist-s">‚Äã</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em"><span></span></span></span></span></span></span></span></span></span></span>. More realistically, we expect price to be a player-dependent function of many factors as the different volumes of the assets in the different domains, the trust assumptions of the domains, etc.</p><p>We note that, throughout, we considered EV and MEV as <em>revenue</em> to the player, never taking into account the costs. This bodes well with our definitions in terms of players with given ordering rights, since getting those rights is arguably the costliest component of MEV extraction (although compute cost might be non-trivial considering the ordering problem is an NP-complete knapsack problem). In any case, it seems cleaner to think of MEV as only a revenue component, and consider the extraction costs separately. Like in the multi-block setting, we can define a probabilistic ensemble for obtaining the ordering rights, and consider the costs associated to each probability distribution. It is trickier, however, in that ordering rights are typically granted in units that are characteristic of each domain (e.g. propose one block), while costs are typically expressed as rates (per unit of time). So while MEV will usually come in, say, blocks, the cost of producing those blocks will be expressed in units of time, and the specifics of their relation will be particular to each domain. How each domain achieves finality will also be critical to establishing this relation (perhaps there was a great MEV opportunity 1 year ago, but the cost of re-orging the chain to get it would be prohibitive), so we don&#x27;t expect a general formulation of MEV to accommodate it.</p><p>Finally, we have only considered &quot;sure-thing&quot; MEV by expressing it in terms of balances that increase after a state change (for the MEV to be positive). This falls short of describing the more general notion of &quot;probabilistic MEV&quot;, where actors are comfortable taking risk in expectation of later rewards. Examples of this are buyouts of new token listings in expectation of rising prices, or more esoterically front-running of NFT bids. It is likely that most of these opportunities can be described by incorporating pricing functions, and we look forward to seeing work in this direction.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>The burgeoning phenomenon of MEV begs for a consistent formal approach to unlock proper theory to emerge (think automated auditing of MEV exposure of smart contract systems for an example, in line with the work presented in the Clockwork Finance paper cited above). Formalizing MEV, however, involves droves of technicalities that usually trade off generality for completeness (like the case of whether to include reverted transactions). Here, we provided a clear meaning to the notion of players, which led us to separate the problem of achieving sequencing rights from that of value extraction, allowing us to go to great generality in defining MEV. Our formulas (5) and (6) provide a consistent, easily generalizable definition that can be taken to the multi-domain world. We also highlighted many of the issues faced in achieving formal definitions of MEV, which we hope will allow for a more systematic treatment of the subject.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/on-the-most-profitable-block"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ Why Building the Most Profitable Block is Important</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/cross-domain-mev"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Unity is Strength - A Formalization of Cross-Domain Maximal Extractable Value ¬ª</div></a></div></nav></main><div class="col col--2 TOC_BWJh"><div class="tableOfContents_H-s0 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#current-mev-definitions" class="table-of-contents__link">Current MEV definitions</a></li><li><a href="#existing-limitations" class="table-of-contents__link">Existing limitations</a></li><li><a href="#patching-mev" class="table-of-contents__link">Patching MEV</a></li><li><a href="#outstanding-issues-and-extensions" class="table-of-contents__link">Outstanding issues and extensions</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="col footer__links"><div><ul class="row footer__items"><li class="footer__item"><a href="https://github.com/flashbots" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://docs.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation</a></li><li class="footer__item"><a href="https://status.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status</a></li></ul></div><div><ul class="row footer__items"><li class="footer__item"><a href="https://calendar.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Calendar</a></li><li class="footer__item"><a href="https://writings.flashbots.net/tags/transparency-report" target="_blank" rel="noopener noreferrer" class="footer__link-item">Transparency reports</a></li></ul></div><div><ul class="row footer__items"><li class="footer__item"><a href="http://discord.gg/flashbots" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCclbTgsnYUy3vmrptIqCmqQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">¬© 2023 Flashbots, Ltd</div></div></div></footer></div>
<script src="/assets/js/runtime~main.007b9530.js"></script>
<script src="/assets/js/main.c2bc88a2.js"></script>
</body>
</html>