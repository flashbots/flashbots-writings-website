<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="Flashbots Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Flashbots Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous"><title data-react-helmet="true">Beginner&#x27;s Guide to mev-boost | Flashbots</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://writings.flashbots.net/beginners-guide-mevboost"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Beginner&#x27;s Guide to mev-boost | Flashbots"><meta data-react-helmet="true" name="description" content="Understanding mev-boost as an iteration on the original Flashbots auction, and how it paves the way for full in-protocol PBS"><meta data-react-helmet="true" property="og:description" content="Understanding mev-boost as an iteration on the original Flashbots auction, and how it paves the way for full in-protocol PBS"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2022-06-15T00:00:00.000Z"><meta data-react-helmet="true" property="article:tag" content="mev-boost"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://writings.flashbots.net/beginners-guide-mevboost"><link data-react-helmet="true" rel="alternate" href="https://writings.flashbots.net/beginners-guide-mevboost" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://writings.flashbots.net/beginners-guide-mevboost" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.1b11a3d0.css">
<link rel="preload" href="/assets/js/runtime~main.54d9824e.js" as="script">
<link rel="preload" href="/assets/js/main.ddcd350a.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navRoot_1Vd8 navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items fixFlex_19nV"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" target="_self" href="/"><svg width="12" height="14" viewBox="0 0 12 14"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.07289 0L7.91879 0.483459L6.631 4.76674H11.5178L4.19989 12.679L3.35398 12.1956L4.72089 7.64736H0L7.07289 0ZM5.20514 6.03608L6.33835 2.26697L2.28701 6.64736H5.02136L5.20514 6.03608ZM4.93407 10.4124L9.23077 5.76674H6.33078L6.16271 6.3243L4.93407 10.4124Z" fill="var(--ifm-font-color-base)"></path></svg><span class="navbar__title title_2fsg logoTitle_2plQ">Flashbots</span></a></div><div class="navbar__items navbar__items--right fixFlex_19nV navItems_l2fJ"><a href="https://flashbots.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>About</span></a><a href="https://boost.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>MEV-Boost</span></a><a href="https://collective.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Forum</span></a><a href="https://jobs.flashbots.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Join us</span></a><div class="react-toggle toggle_268h react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page layoutDefaults_1s0t"><div class="container margin-vert--md containerRoot_3RmU"><div class="row"><main class="col col--12" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_nmLu" itemprop="headline">Beginner&#x27;s Guide to mev-boost</h1><div class="blogPostData_3WzT margin-vert--md"><time datetime="2022-06-15T00:00:00.000Z" itemprop="datePublished">15.06.22</time> Â· 7 min read</div><div class="row margin-top--md margin-bottom--sm"><div class="col col--6 authorCol_HqTB"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a class="fixedColor_3yYP" itemprop="url"><span itemprop="name">Jolene Dunne</span></a></div></div></div></div></div></header><div class="markdown" itemprop="articleBody"><p>Understanding mev-boost as an iteration on the original Flashbots auction, and how it paves the way for full in-protocol PBS</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="what-is-mev-boost"></a>What is mev-boost?<a class="hash-link" href="#what-is-mev-boost" title="Direct link to heading">#</a></h3><p>mev-boost is the version of Flashbots that is adapted for and compatible with Proof of Stake Ethereum. It is related to the design for in-protocol proposer/builder separation, and can be conceptualised as an intermediate step to full in-protocol PBS. By understanding the current Flashbots auction, and by comparing this current state to the plans for PBS, we see how mev-boost provides block-building functionality that would otherwise be unavailable until PBS is completed.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="understanding-the-flashbots-auction"></a>Understanding the Flashbots Auction<a class="hash-link" href="#understanding-the-flashbots-auction" title="Direct link to heading">#</a></h3><p>Currently, Flashbots provides a private transaction pool (<code>mev-relay</code>) and a sealed bid blockspace auction mechanism (<code>mev-geth</code>). This allows miners to outsource the work of finding the optimal block construction.</p><div style="text-align:center"><p><img alt="current-fb-auction.png" src="/assets/images/current-fb-auction-74fe41e4b56744b254fb7575f3b7f576.png"></p></div><p><code>mev-geth</code> introduced a new RPC endpoint, <code>eth_sendBundle</code> - the message sent to this endpoint is called a bundle. <strong>Bundles</strong> consist of one or many transactions to be executed in an atomic batch. They can be sent to the relay by a searcher, and to the miners by the relay.</p><p><strong>Searchers</strong> are Ethereum users who prefer to use the FB private transaction pool over the regular p2p pool. They monitor the state of the chain and send bundles to the relayers. There is an option for searchers to express their bids for inclusion via the ether gas price, or by direct eth transfer to the miner&#x27;s coinbase address.</p><p>The <strong>relay</strong> is a bundle propagation service that receives bundles from searchers and forwards them to miners. The relay is in charge of validating and routing FB bundles. Since searchers do not have to pay for failed bids (they can pay directly to the coinbase address, and make the payment conditional on their bundle succeeding), there is the potential that they could spam the network with invalid bundles. The relay therefore serves as a mitigation to this DOS threat. It will simulate each transaction and only forward valid bundles to the miner.</p><p>The <strong>miner</strong> (or more generally, block producer) is the party who ultimately collects all the bundles and produces a block. Miners traditionally run go-ethereum, and greedily order transactions by gas price. However, miners participating in Flashbots run a version of <code>mev-geth</code>.</p><p>These miners that are running mev-geth evaluate incoming bundles using the first-price sealed-bid auction and pick the most profitable bundles to place at the top of the block. The node then compares the Flashbots block to a normal block and begins mining on the most profitable.</p><p>The Flashbots bundle information allows the searcher to express blockspace preferences relative to the state of the chain as well as the state of the transaction pool. Before Flashbots, the only way for searchers to express their preference for transaction placement was via the gas price. For transactions that needed to be first in the block, this naturally led to competition in the gas price. However, for transactions that could be anywhere in the block, bidding on gas price might be ineffective. Flashbots Auction decoupled placement from gas price, thus enabling price discovery for discrete MEV opportunities instead of competition for priority. The miner can evaluate all bundles received and combine those which do not conflict in order to produce the most profitable block.</p><p>Miners have full access to bundle content and could arbitrarily reorder/steal/censor bundles sent to them by searchers and relayers. However, they are incentivised to comply, as Flashbots monitors for misbehaviour and removes miners who steal.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="proposerbuilder-separation"></a>Proposer/Builder Separation<a class="hash-link" href="#proposerbuilder-separation" title="Direct link to heading">#</a></h3><p>Proposer/block-builder separation (<strong>PBS</strong>) was proposed by Ethereum researchers as a response to the risk that MEV poses to decentralisation of consensus networks. They have suggested that uncontrolled MEV extraction promotes economies of scale that have a centralising effect, as well as causing complications to decentralised pooling.</p><p>PBS is a change to the core protocol that aims to mitigate this. Instead of the block proposer (currently the miner, after PoS the validator) also trying to produce a maximally profitable block by itself, it can outsource this to a block building <em>market</em>. Here, block builders would produce bundles consisting of a complete block and a fee for the proposer. The proposer just has to pick the block with the highest fee.</p><p>There are number of properties that are desired in the PBS design:</p><ul><li>untrusted proposers and builders should be able to participate successfully (there is little to no risk that a proposer would steal blocks from a builder, and vice versa)</li><li>proposers are not advantaged by having high resources or technical competence</li><li>proposers cannot extract transactions from bundles without paying the fee</li><li>that the new design works with the existing consensus layer.</li></ul><p>PBS is still an open and active research area that is developing rapidly. The most recent design/specification for the in-protocol version is <a href="https://ethresear.ch/t/two-slot-proposer-builder-separation/10980" target="_blank" rel="noopener noreferrer">two-slot PBS</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="mev-boost"></a>mev-boost<a class="hash-link" href="#mev-boost" title="Direct link to heading">#</a></h3><p>Mev-boost is an updated Flashbots architecture that is compatible with PoS Ethereum. It also implements the design goals behind PBS, although in a semi-trusted way. The design is as follows: </p><div style="text-align:center"><p><img alt="mevboost-proposed-architecture.png" src="/assets/images/mevboost-proposed-architecture-58d23927aab395a7148b2d6126f5b374.png"></p></div><p>We start with the existing Ethereum network and mempool in the above diagram. As discussed previously, in the current Flashbots model searchers take transactions from the public mempool, potentially adding their own, and arrange them into bundles.</p><p>The possibility of <strong>private orderflow</strong> is also anticipated at this point. Private orderflow (also known as exclusive orderflow) refers to transactions that can be included in blocks but are not visible in the public mempool. This could be because the transactions are sent to a certain entity and they may route these transactions to their own nodes, or keep them secret in order to build more profitable blocks for themselves.</p><p><strong>Block builders</strong> are also introduced - these are services/providers that will aggregate various bundles and transactions into block templates. The builder orders the transactions in a block according to what is most profitable for them. The block templates are then forwarded to a relay.</p><p>The relay receives these block templates (also referred to as execution payloads), and will verify their validity. The <strong>MEV-boost</strong> component is a middleware which handles communication with the relays, the profit-switching logic, and a fallback mechanism in the case of some system failure.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="what-is-the-link-between-pbs-and-mev-boost"></a>What is the link between PBS and MEV-boost?<a class="hash-link" href="#what-is-the-link-between-pbs-and-mev-boost" title="Direct link to heading">#</a></h3><p>If Flashbots Auction was the first step of &quot;block building as a service&quot;, then PBS could be thought of as a response to the success and mainstream adoption of Flashbots. Instead of the entire network utilising one block builder (and thereby creating a centralising effect at the block-building level), the protocol would split block proposing and block building into two separate components. Block proposing would be handled in-protocol by the validators, and it is then much easier for block building to be delegated to a market of competing parties.</p><p>However, the current designs of PBS require a change to beacon chain consensus (specifically the fork choice rule). For this reason (as well the designs not being completely finalised yet), it will need to wait until after the merge is successfully completed.</p><p>Flashbots MEV-boost acts as a prototype for what a block-building market would look like, and provides the necessary proposer logic and middleware that is missing from PoS Ethereum.</p><p>Longer-term, PBS is important to the Ethereum protocol for a number of reasons. Splitting block proposal and block building into separate components actually has desired effects that align with the protocol&#x27;s goals, such as removing the requirement for validators to hold the full state (stateless Ethereum initiative). PBS is also a necessary step for the current favoured sharding proposal (Danksharding - <a href="https://notes.ethereum.org/@vbuterin/proto_danksharding_faq" target="_blank" rel="noopener noreferrer">https://notes.ethereum.org/@vbuterin/proto_danksharding_faq</a>).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="resources-and-further-reading"></a>Resources and Further Reading<a class="hash-link" href="#resources-and-further-reading" title="Direct link to heading">#</a></h3><p>These resources were directly referenced when creating this post</p><ul><li><a href="https://docs.flashbots.net/flashbots-auction/overview" target="_blank" rel="noopener noreferrer">https://docs.flashbots.net/flashbots-auction/overview</a></li><li><a href="https://ethresear.ch/t/proposer-block-builder-separation-friendly-fee-market-designs/9725" target="_blank" rel="noopener noreferrer">https://ethresear.ch/t/proposer-block-builder-separation-friendly-fee-market-designs/9725</a></li><li><a href="https://ethresear.ch/t/mev-boost-merge-ready-flashbots-architecture/11177" target="_blank" rel="noopener noreferrer">https://ethresear.ch/t/mev-boost-merge-ready-flashbots-architecture/11177</a></li><li><a href="https://notes.ethereum.org/@vbuterin/pbs_censorship_resistance" target="_blank" rel="noopener noreferrer">https://notes.ethereum.org/@vbuterin/pbs_censorship_resistance</a></li><li><a href="https://ethresear.ch/t/two-slot-proposer-builder-separation/10980" target="_blank" rel="noopener noreferrer">https://ethresear.ch/t/two-slot-proposer-builder-separation/10980</a></li></ul><p>Diagrams from <a href="https://github.com/flashbots/mev-boost" target="_blank" rel="noopener noreferrer">https://github.com/flashbots/mev-boost</a></p><p>Further mev-boost and PBS resources and relevant talks have been curated by Flashbots here - <a href="https://github.com/flashbots/mev-boost/wiki/Resources" target="_blank" rel="noopener noreferrer">https://github.com/flashbots/mev-boost/wiki/Resources</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/mev-boost-call-for-testing"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« Boost your MEV in Ethereum proof-of-stake</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/why-run-mevboost"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Why run mev-boost? Â»</div></a></div></nav></main><div class="col col--2 TOC_1KIS"><div class="tableOfContents_rbnR thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-mev-boost" class="table-of-contents__link">What is mev-boost?</a></li><li><a href="#understanding-the-flashbots-auction" class="table-of-contents__link">Understanding the Flashbots Auction</a></li><li><a href="#proposerbuilder-separation" class="table-of-contents__link">Proposer/Builder Separation</a></li><li><a href="#mev-boost" class="table-of-contents__link">mev-boost</a></li><li><a href="#what-is-the-link-between-pbs-and-mev-boost" class="table-of-contents__link">What is the link between PBS and MEV-boost?</a></li><li><a href="#resources-and-further-reading" class="table-of-contents__link">Resources and Further Reading</a></li></ul></div></div></div></div></div><footer class="footer"><div class="container"><div class="col footer__links"><div><ul class="row footer__items"><li class="footer__item"><a href="https://github.com/flashbots" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li><li class="footer__item"><a href="https://docs.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Documentation</a></li><li class="footer__item"><a href="https://status.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Status</a></li></ul></div><div><ul class="row footer__items"><li class="footer__item"><a href="https://calendar.flashbots.net/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Calendar</a></li><li class="footer__item"><a href="https://writings.flashbots.net/tags/transparency-report" target="_blank" rel="noopener noreferrer" class="footer__link-item">Transparency reports</a></li></ul></div><div><ul class="row footer__items"><li class="footer__item"><a href="http://discord.gg/flashbots" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCclbTgsnYUy3vmrptIqCmqQ" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 Flashbots, Ltd</div></div></div></footer></div>
<script src="/assets/js/runtime~main.54d9824e.js"></script>
<script src="/assets/js/main.ddcd350a.js"></script>
</body>
</html>